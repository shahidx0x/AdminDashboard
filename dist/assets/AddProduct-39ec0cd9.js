import{a6 as oe,u as ne,a as ce,r as l,e as N,c as de,d as ue,j as s,B as o,L as i,U as E,g as L,M as y,h as ie,I as me,C as S,i as R,a7 as pe,a8 as xe}from"./index-1fa5fa07.js";import{R as T,t as ge}from"./toolbar.config-6aa6f873.js";import{g as be}from"./BrandServices-5b1d03db.js";import{a as he}from"./CategoryService-ce6fe38a.js";import{S as w}from"./SelectPicker-5f81d416.js";const fe=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function je(n,c){const d=new FileReader;d.onloadend=()=>{c(d.result)},d.readAsDataURL(n)}function Ue(){var U,M,F;const n=ne(e=>e.user.user),c=ce(),[d,m]=l.useState(!1),[_,p]=l.useState({product_image:""}),[k,v]=l.useState([]),[A,C]=l.useState(null),[x,q]=l.useState("brand"),[g,H]=l.useState(""),[I,z]=l.useState(""),{data:b}=N(["brandsIdName",n.jwt],be),{data:h}=N(["categoryIdName","",n.jwt,x.split(",")[0],-1],he),{data:f}=N(["subCategoryIdName","",n.jwt,g.split(",")[0],-1],pe),V=(U=h==null?void 0:h.data)==null?void 0:U.map(e=>({label:e==null?void 0:e.category_label,value:e._id,slug:e.category_slug})),$=(M=f==null?void 0:f.data)==null?void 0:M.map(e=>({label:e==null?void 0:e.subcategory_name,value:e._id+","+e.subcategory_slug})),D=[...((F=b==null?void 0:b.data)==null?void 0:F.map(e=>({label:e==null?void 0:e.name,value:e.id,slug:e.slug})))||["loading"]].map(e=>({label:e==null?void 0:e.label,value:(e==null?void 0:e.value)+","+(e==null?void 0:e.slug)})),O=[...V||[{label:"No Category",value:"no-category"}]].map(e=>({label:e==null?void 0:e.label,value:(e==null?void 0:e.value)+","+(e==null?void 0:e.slug)})),[P,Q]=l.useState(T.createEmptyValue()),G=e=>{e&&Q(e)},{register:t,control:j,reset:ye,handleSubmit:J,formState:{errors:Se}}=de({}),K=ue(xe),[W,X]=l.useState("No Brand"),[Y,Z]=l.useState("No Category"),[ee,se]=l.useState("No Sub Category"),ae=s.jsx(y,{showIcon:!0,type:"success",closable:!0,children:"Success : Product Added Successfully."}),le=s.jsx(y,{showIcon:!0,type:"error",closable:!0,children:"Error : Product Added Failed !."}),re=e=>{const a=P.toString("html");e.brand_id=x.split(",")[0],e.subcategory_id=I.split(",")[0],e.category_id=g.split(",")[0],e.fet_image=[...k],e.product_image=A,e.brand_name=W,e.category_name=Y,e.subcategory_name=ee,e.product_information=a,e.brand_slug=x.split(",")[1],e.category_slug=g.split(",")[1],e.subcategory_slug=I.split(",")[1],console.log(e),K.mutate({data:e,token:n.jwt},{onSuccess:r=>{c.push(ae,{placement:"bottomStart",duration:2e3}),p(null),C(null),v(null)},onError:r=>{c.push(le,{placement:"bottomStart",duration:3e3})}}),setTimeout(()=>{window.location.reload()},1500)},[we,te]=l.useState(""),[_e,B]=l.useState(null),u=e=>{/^\d*$/.test(e)?(te(e),B("")):B("Only numeric values are allowed")};return s.jsx(s.Fragment,{children:s.jsx("section",{className:"p-6 bg-base-100 text-gray-900 h-screen ",children:s.jsxs("form",{onSubmit:J(re),className:"container flex flex-col mx-auto space-y-12 ",children:[s.jsxs("fieldset",{className:" grid grid-cols-4 gap-6 p-24 border-l-8 border-l-indigo-400 border-b-2 border-t hover:shadow-md rounded-md shadow-sm bg-base-50",children:[s.jsxs("div",{className:"space-y-2 col-span-full lg:col-span-1",children:[s.jsxs(o,{className:"text-sm",children:[s.jsx(o.Item,{as:i,to:"/dashbord",children:"Home"}),s.jsx(o.Item,{as:i,to:"/dashbord/product/list",children:"product-list"}),s.jsx(o.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),s.jsx("p",{className:"font-thin text-3xl",children:"Product & Feature Images"})]}),s.jsx("div",{className:"flex  flex-col flex-wrap gap-4 col-span-full lg:col-span-3",children:s.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-10",children:[s.jsxs("div",{className:"col-span-full sm:col-span-3",children:[s.jsx("p",{className:"font-bold font-mono text-sm underline",children:"Upload Product Image"}),s.jsx(E,{fileListVisible:!1,listType:"picture",action:`${L.endpoints.host}/upload`,onUpload:e=>{m(!0),je(e.blobFile,a=>{p(r=>({...r,product_image:a}))})},onSuccess:(e,a)=>{m(!1),C(e.fileUrl)},onError:()=>{p(null),m(!1),c.push(s.jsx(y,{type:"error",children:"Upload failed"}))},children:s.jsxs("button",{type:"button",style:{width:150,height:150},children:[d&&s.jsx(ie,{backdrop:!0,center:!0}),_?s.jsx("img",{src:_.product_image,width:"100%",height:"150%",alt:"product_picture"}):s.jsx("img",{src:"https://www.ivins.com/wp-content/uploads/2020/09/placeholder-1.png",alt:"product_picture"})]})})]}),s.jsxs("div",{className:"col-span-full",children:[s.jsx("p",{className:"font-bold font-mono text-sm underline",children:"Upload Product Feature Image"}),s.jsx(E,{multiple:!0,listType:"picture",action:`${L.endpoints.host}/upload`,onSuccess:e=>v(a=>[...a,e.fileUrl]),children:s.jsx("button",{type:"button",children:s.jsx(fe,{})})})]})]})})]}),s.jsxs("fieldset",{className:"  grid grid-cols-4 gap-6 px-16 2xl:px-24 py-5 border-l-8 border-l-indigo-400 border-b-2 border-t hover:shadow-md rounded-md shadow-sm bg-base-50",children:[s.jsxs("div",{className:"space-y-2 col-span-full lg:col-span-1",children:[s.jsxs(o,{className:"text-sm",children:[s.jsx(o.Item,{as:i,to:"/dashbord",children:"Home"}),s.jsx(o.Item,{as:i,to:"/dashbord/product/list",children:"product-list"}),s.jsx(o.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),s.jsx("p",{className:"font-thin  text-3xl",children:"Product Inormation"})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 col-span-full lg:col-span-3",children:[s.jsxs("div",{className:"col-span-full sm:col-span-3 flex flex-col gap-1",children:[s.jsx("label",{className:"text-sm font-bold",children:"Product Name"}),s.jsx(me,{required:!0,className:"w-[12rem] 2xl:w-[14.5rem]",...t("name")}),s.jsx("div",{"data-lastpass-icon-root":"true"})]}),s.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-3 gap-1",children:[s.jsx("label",{className:"text-sm font-bold",children:"Select Company"}),s.jsx(S,{name:"brand_id",...t("brand_id"),control:j,render:({field:e})=>s.jsx(w,{searchable:!0,...e,size:"md",data:D,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(a,r)=>{e.onChange(a),q(a),X(r.target.innerHTML)},onBlur:()=>e.onBlur()})})]}),s.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-3 gap-1",children:[s.jsx("label",{className:"text-sm font-bold",children:"Category"}),s.jsx(S,{name:"category_id",...t("category_id"),control:j,render:({field:e})=>s.jsx(w,{searchable:!0,...e,size:"md",data:O,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(a,r)=>{e.onChange(a),Z(r.target.innerHTML),H(a)},onBlur:()=>e.onBlur()})})]}),s.jsxs("div",{className:"col-span-full flex flex-col gap-1",children:[s.jsx("label",{className:"text-sm font-bold",children:"Subcategory"}),s.jsx(S,{name:"sub_category_id",...t("subcategory_id"),control:j,render:({field:e})=>s.jsx(w,{searchable:!0,...e,size:"md",data:$,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(a,r)=>{se(r.target.innerHTML),e.onChange(a),z(a)},onBlur:()=>e.onBlur()})})]}),s.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-2 gap-1",children:[s.jsx("label",{className:"text-sm font-bold",children:"Price"}),s.jsx("input",{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",required:!0,type:"number",...t("price"),onChange:u})]}),s.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[s.jsx("label",{className:"text-sm font-bold",children:"Minimum Purchase"}),s.jsx("input",{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",type:"number",...t("min_purchease"),onChange:u})]}),s.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[s.jsx("label",{htmlFor:"zip",className:"text-sm font-bold",children:"Maximum Purchase"}),s.jsx("input",{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",required:!0,type:"number",...t("max_purchease"),onChange:u})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-sm font-bold",children:"Discount"}),s.jsx("input",{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",required:!0,type:"number",...t("discount"),onChange:u})]}),s.jsx("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:s.jsx("div",{className:"flex flex-col gap-5",children:s.jsxs("div",{className:"2xl:w-[100vh]",children:[s.jsx("label",{className:"text-sm font-bold",children:"Product Information"}),s.jsx(T,{className:"mt-2",toolbarConfig:ge,value:P,onChange:G}),s.jsxs("div",{className:"flex gap-2 mt-10",children:[s.jsx(R,{className:"2xl:w-[10rem]",appearance:"ghost",children:"Cancel"}),s.jsx(R,{type:"submit","aria-required":!0,appearance:"primary",className:"bg-blue-600 font-bold 2xl:h-[3rem] 2xl:w-[10rem] ",children:"Add Product"})]})]})})})]})]})]})})})}export{Ue as default};
