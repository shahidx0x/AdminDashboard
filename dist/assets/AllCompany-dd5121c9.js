import{r as t,u as _,a as Ne,f as ve,e as Se,d as j,c as Le,j as e,P as we,B as f,L as A,k as u,g as E,l as Ie,m as h,I as F,T as Be,n as P,o as He,p as T,R as Ke,M as W,_ as g,q as Me,A as Re,s as _e}from"./index-9a22797f.js";import{a as Ae,d as Ee,b as Fe}from"./BrandServices-d03dfbb8.js";function Ue(){var B,H,K,M,R;t.useState(!1);const[y,Pe]=t.useState(!0);t.useState(!0);const[q,Te]=t.useState(!1);t.useState(10);const[b,C]=t.useState(1);t.useState(!0),t.useState(!0);const[O,We]=t.useState(!1);t.useState(!0);const x=_(s=>s.user.user),[$,U]=t.useState(""),[V,k]=t.useState(!1);t.useState(!1),t.useState(null),t.useState(!1);const N=Ne();t.useState(!1),t.useState(null),t.useState({fileUrl:""}),t.useState(0);const{Column:G,HeaderCell:v,Cell:o}=T,Q=s=>e.jsx(o,{...s,style:{padding:4}}),z=s=>e.jsx(v,{...s,style:{padding:4},children:e.jsx("div",{className:"flex justify-center font-bold",children:s.children})}),J=({rowData:s,dataKey:n,...l})=>e.jsx(o,{...l,children:e.jsx("div",{className:"flex justify-center -mt-2",children:e.jsx(Re,{className:"",src:(s==null?void 0:s.brand_image)||"https://universalele.websites.co.in/obaju-turquoise/img/product-placeholder.png",alt:"P"})})}),X=ve(),{data:r,status:Y,refetch:c}=Se(["brands",b,x.jwt],Ae,{cacheTime:0}),Z=({rowData:s,dataKey:n,...l})=>e.jsx(o,{...l,children:e.jsx("p",{className:"flex justify-center items-center",children:s==null?void 0:s.brand_label})}),D=({rowData:s,dataKey:n,...l})=>e.jsx(o,{...l,children:e.jsx("p",{className:"flex justify-center font-bold items-center",children:s==null?void 0:s.productCount})}),ee=({rowData:s,dataKey:n,...l})=>e.jsx(o,{...l,children:e.jsx("p",{className:"flex justify-center font-bold items-center",children:s==null?void 0:s.categoryCount})}),se=({rowData:s,dataKey:n,...l})=>e.jsx(o,{...l,children:e.jsx("p",{className:"flex justify-center items-center",children:s==null?void 0:s.brand_address})}),[te,m]=t.useState(!1),[ne,le]=t.useState(null),ae=()=>{m(!0)},re=j(Ee),oe=()=>{re.mutate({deleteId:ne,token:x.jwt},{onSuccess:s=>{N.push(e.jsx(W,{type:"success",children:"Brand deleted successfully"})),c()},onError:s=>{N.push(e.jsx(W,{type:"error",children:"Brand delete failed !"}))}}),m(!1),c()},S=()=>m(!1),p=[{key:"brand_image",label:"Company Image",cellRenderer:J,width:200},{key:"brand_label",label:"Company Name",cellRenderer:Z,width:250},{key:"categoryCount",label:"Category Count",cellRenderer:ee,width:150},{key:"productCount",label:"Product Count",cellRenderer:D,width:150},{key:"brand_description",label:"Company Description",cellRenderer:se,width:400},{key:"actions",label:"Actions",cellRenderer:({rowData:s,...n})=>{const l=()=>{ae(),le(s._id)},i=()=>{X("edit",{state:{myData:s}})};return e.jsx(o,{...n,children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-500 border px-3 py-2 -mt-1 hover:text-white hover:bg-indigo-500 rounded-lg ",onClick:i,children:"Edit"}),e.jsx("button",{className:"text-red-500 border px-3 py-2 -mt-1 rounded-lg  hover:text-white hover:bg-red-500 ",onClick:()=>l(),children:"Delete"})]})})},width:200}];j(_e),Le();const d=j(Fe),de=s=>{U(s),s===""&&(c(),k(!1))},ce=()=>{k(!0),g.promise(d.mutateAsync({queryKey:["user_search",$,x.jwt]}),{loading:"Searching...",success:e.jsx("b",{children:"Company found!"}),error:e.jsx("b",{children:"Company not found in the database!"})})},ie=V&&((B=d==null?void 0:d.data)!=null&&B.data[0])?[(H=d==null?void 0:d.data)==null?void 0:H.data[0]]:(K=r==null?void 0:r.data)==null?void 0:K.data,[L,ue]=t.useState(p.map(s=>s.key)),he=p.filter(s=>L.some(n=>n===s.key)),xe=y?Q:o,me=y?z:v,pe=()=>{C(s=>{var n,l;return s<((l=(n=r==null?void 0:r.data)==null?void 0:n.meta)==null?void 0:l.total_page)?s+1:s}),c()},je=()=>{C(s=>Math.max(s-1,1)),c()},[fe,w]=t.useState(!1),ge=s=>{s.target.value==="confirm"?w(!0):w(!1)},a=_(s=>s.settings),[I,ye]=t.useState(null),be=s=>{const n=s.target.files[0];ye(n)},Ce=async()=>{if(I){const s=new FormData;s.append("file",I),g.promise(Me.post(E.endpoints.host+"/import/companys",s),{loading:"Importing Companys...",success:e.jsx("b",{children:"Successfully Imported"}),error:n=>e.jsx("p",{children:n.response.data.message})})}else console.log("No xlsx file sected"),g.error("No xlsx file sected")};return c(),e.jsxs(we,{header:e.jsxs("div",{children:[e.jsxs(f,{className:"text-sm font-mono",children:[e.jsx(f.Item,{as:A,to:"/dashbord",children:"dashbord / company"}),e.jsx(f.Item,{active:!0,className:"text-blue-400",children:"companys"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Companys"}),e.jsxs("div",{className:"flex gap-5",children:[e.jsxs("div",{className:"flex",children:[e.jsx("input",{onChange:be,accept:".xlsx",type:"file",className:"border"}),e.jsx(u,{onClick:Ce,className:"bg-indigo-200 text-indigo-500 font-bold",children:"Import Companys"})]}),e.jsx(u,{className:"bg-indigo-200 text-indigo-500 font-bold",children:e.jsx(A,{to:E.endpoints.host+"/export/companys",children:"Export Companys"})})]})]})]}),bordered:!0,children:[e.jsx(Ie,{}),e.jsxs(h,{open:te,onClose:S,children:[e.jsxs(h.Header,{className:"p-5",children:[e.jsx(h.Title,{children:"Are you sure you want delete company ?"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"mt-2",children:"All Category and Product will be deleted under this company"}),e.jsx(F,{onChange:(s,n)=>ge(n),placeholder:"Type 'confirm' to delete"})]})]}),e.jsxs(h.Footer,{children:[e.jsx(u,{disabled:!fe,onClick:oe,className:"bg-blue-500 w-20",appearance:"primary",children:"Confirm"}),e.jsx(u,{className:" bg-red-500 text-white",onClick:S,children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsx("hr",{}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex flex-col gap-5 2xl:flex-row 2xl:justify-between",children:[e.jsx("div",{className:"",children:e.jsx(Be,{className:"h-12",data:p,labelKey:"label",valueKey:"key",value:L,onChange:ue,cleanable:!1})}),e.jsx("div",{children:e.jsx("div",{className:" ",children:e.jsxs(P,{children:[e.jsx(F,{placeholder:"Search by Company Name",onChange:s=>de(s)}),e.jsx(P.Button,{onClick:()=>ce(),tabIndex:-1,children:e.jsx(He,{className:"text-indigo-500 font-bold"})})]})})})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-5",style:{height:a.autoHeight?"auto":400},children:[e.jsx(T,{loading:Y==="loading",height:300,hover:a.hover,fillHeight:O,showHeader:a.header,autoHeight:a.autoHeight,data:q?[]:ie,bordered:a.bordered,cellBordered:a.bordered,headerHeight:a.compact?40:30,rowHeight:a.compact?56:30,children:he.map(s=>{const{key:n,label:l,cellRenderer:i,...ke}=s;return t.createElement(G,{...ke,key:n,fullText:!0},e.jsx(me,{children:l}),i?Ke.createElement(i,{dataKey:n}):e.jsx(xe,{dataKey:n}))})}),e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex items-center justify-center py-10 lg:px-0 sm:px-6 px-4",children:e.jsxs("div",{className:"lg:w-3/5 w-full  flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4L4.49984 7.33333",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4.00002L4.49984 0.666687",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("p",{onClick:je,className:`text-sm ml-3 font-medium leading-none ${a.theme==="dark"&&"text-white"} `,children:"Previous"})]}),e.jsx("div",{className:"sm:flex hidden",children:e.jsxs("p",{className:`text-sm font-bold leading-none cursor-pointer text-gray-600 hover:text-indigo-700 border-t border-transparent hover:border-indigo-400 pt-3 mr-4 px-2 ${a.theme==="dark"&&"text-white"}`,children:["pages : ",b,"/",(R=(M=r==null?void 0:r.data)==null?void 0:M.meta)==null?void 0:R.total_page]})}),e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsx("p",{onClick:pe,className:`text-sm font-medium leading-none mr-3 ${a.theme==="dark"&&"text-white"}`,children:"Next"}),e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 7.33333L12.8333 4",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 0.666687L12.8333 4.00002",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})})})]})]})]})}export{Ue as default};
