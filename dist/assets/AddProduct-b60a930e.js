import{u as le,r,j as e,L as u,c as te,B as M}from"./index-6fa0113c.js";import{u as oe,C as f}from"./index.esm-3d52a455.js";import{u as ne}from"./find-f00d7bbc.js";import{u as j}from"./useQuery-6d9d623c.js";import{R as U,t as ce}from"./toolbar.config-f54d299e.js";import{g as de}from"./BrandServices-8ee56d58.js";import{a as me}from"./CategoryService-21df62d7.js";import{c as ie}from"./ProductService-133937d5.js";import{g as ue}from"./SubCategoryServices-d6aa268c.js";import{c as F}from"./api.config-65890cae.js";import{u as pe}from"./useToaster-c6a06fde.js";import{B as o}from"./Breadcrumb-4038157f.js";import{U as E,I as xe}from"./Uploader-0f8000d3.js";import{M as N}from"./toaster-ed77c3ce.js";import{c as he}from"./createLucideIcon-81e5fef3.js";import{S as y}from"./SelectPicker-cb2955c3.js";import"./utils-0507c293.js";import"./statusIcons-221fd85e.js";import"./propTypes-5cd9d852.js";import"./isArrayLikeObject-950638f0.js";import"./AngleDown-4890c9f8.js";const be=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function ge(n,c){const d=new FileReader;d.onloadend=()=>{c(d.result)},d.readAsDataURL(n)}function De(){var I,P,B;const n=le(s=>s.user.user),c=pe(),[d,p]=r.useState(!1),[S,x]=r.useState({product_image:""}),[L,v]=r.useState([]),[R,w]=r.useState(null),[T,k]=r.useState("brand"),[q,A]=r.useState(""),{data:h}=j(["brandsIdName",n.jwt],de),{data:i}=j(["categoryIdName","",n.jwt,T,-1],me);console.log(i);const{data:b}=j(["subCategoryIdName","",n.jwt,q,-1],ue),z=(I=i==null?void 0:i.data)==null?void 0:I.map(s=>({label:s==null?void 0:s.category_label,value:s._id})),H=(P=b==null?void 0:b.data)==null?void 0:P.map(s=>({label:s==null?void 0:s.subcategory_name,value:s._id})),V=[...((B=h==null?void 0:h.data)==null?void 0:B.map(s=>({label:s==null?void 0:s.name,value:s.id})))||["loading"]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),$=[...z||[{label:"No Category",value:"no-category"}]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),[C,D]=r.useState(U.createEmptyValue()),O=s=>{s&&D(s)},{register:l,control:g,reset:je,handleSubmit:Q,formState:{errors:Ne}}=oe({}),G=ne(ie),[J,K]=r.useState("No Brand"),[W,X]=r.useState("No Category"),[Y,Z]=r.useState("No Sub Category"),ee=e.jsx(N,{showIcon:!0,type:"success",closable:!0,children:"Success : Product Added Successfully."}),se=e.jsx(N,{showIcon:!0,type:"error",closable:!0,children:"Error : Product Added Failed !."}),ae=s=>{const a=C.toString("html");s.fet_image=[...L],s.product_image=R,s.brand_name=J,s.category_name=W,s.subcategory_name=Y,s.product_information=a,G.mutate({data:s,token:n.jwt},{onSuccess:t=>{c.push(ee,{placement:"bottomStart",duration:2e3}),x(null),w(null),v(null)},onError:t=>{c.push(se,{placement:"bottomStart",duration:3e3})}}),setTimeout(()=>{window.location.reload()},1500)},[ye,re]=r.useState(""),[Se,_]=r.useState(null),m=s=>{/^\d*$/.test(s)?(re(s),_("")):_("Only numeric values are allowed")};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"p-6 bg-base-100 text-gray-900 h-screen",children:e.jsxs("form",{onSubmit:Q(ae),className:"container flex flex-col mx-auto space-y-12 ",children:[e.jsxs("fieldset",{className:" grid grid-cols-4 gap-6 p-24 border-l-8 border-l-indigo-400 border-b-2 border-t hover:shadow-md rounded-md shadow-sm bg-base-50",children:[e.jsxs("div",{className:"space-y-2 col-span-full lg:col-span-1",children:[e.jsxs(o,{className:"text-sm",children:[e.jsx(o.Item,{as:u,to:"/dashbord",children:"Home"}),e.jsx(o.Item,{as:u,to:"/dashbord/product/list",children:"product-list"}),e.jsx(o.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),e.jsx("p",{className:"font-thin text-3xl",children:"Product & Feature Images"})]}),e.jsx("div",{className:"flex  flex-col flex-wrap gap-4 col-span-full lg:col-span-3",children:e.jsxs("div",{className:"flex gap-10",children:[e.jsxs("div",{className:"col-span-full sm:col-span-3",children:[e.jsx("p",{className:"font-bold font-mono text-sm underline",children:"Upload Product Image"}),e.jsx(E,{fileListVisible:!1,listType:"picture",action:`${F.endpoints.host}/upload`,onUpload:s=>{p(!0),ge(s.blobFile,a=>{x(t=>({...t,product_image:a}))})},onSuccess:(s,a)=>{p(!1),w(s.fileUrl)},onError:()=>{x(null),p(!1),c.push(e.jsx(N,{type:"error",children:"Upload failed"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[d&&e.jsx(te,{backdrop:!0,center:!0}),S?e.jsx("img",{src:S.product_image,width:"100%",height:"150%",alt:"product_picture"}):e.jsx("img",{src:"https://www.ivins.com/wp-content/uploads/2020/09/placeholder-1.png",alt:"product_picture"})]})}),e.jsx("div",{"data-lastpass-icon-root":"true"})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("p",{className:"font-bold font-mono text-sm underline",children:"Upload Product Feature Image"}),e.jsx(E,{multiple:!0,listType:"picture",action:`${F.endpoints.host}/upload`,onSuccess:s=>v(a=>[...a,s.fileUrl]),children:e.jsx("button",{type:"button",children:e.jsx(be,{})})})]})]})})]}),e.jsxs("fieldset",{className:"grid grid-cols-4 gap-6 px-24 py-5 border-l-8 border-l-indigo-400 border-b-2 border-t hover:shadow-md rounded-md shadow-sm bg-base-50",children:[e.jsxs("div",{className:"space-y-2 col-span-full lg:col-span-1",children:[e.jsxs(o,{className:"text-sm",children:[e.jsx(o.Item,{as:u,to:"/dashbord",children:"Home"}),e.jsx(o.Item,{as:u,to:"/dashbord/product/list",children:"product-list"}),e.jsx(o.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),e.jsx("p",{className:"font-thin  text-3xl",children:"Product Inormation"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 col-span-full lg:col-span-3",children:[e.jsxs("div",{className:"col-span-full sm:col-span-3 flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Product Name"}),e.jsx(xe,{required:!0,className:"w-[14.5rem]",...l("name")}),e.jsx("div",{"data-lastpass-icon-root":"true"})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-3 gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Select Company"}),e.jsx(f,{name:"brand_id",...l("brand_id"),control:g,render:({field:s})=>e.jsx(y,{searchable:!0,...s,size:"md",data:V,className:"w-[14.5rem]",onChange:(a,t)=>{s.onChange(a),k(a),K(t.target.innerHTML)},onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-3 gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Category"}),e.jsx(f,{name:"category_id",...l("category_id"),control:g,render:({field:s})=>e.jsx(y,{searchable:!0,...s,size:"md",data:$,className:"w-[14.5rem]",onChange:(a,t)=>{s.onChange(a),X(t.target.innerHTML),A(a)},onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{className:"col-span-full flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Subcategory"}),e.jsx(f,{name:"sub_category_id",...l("subcategory_id"),control:g,render:({field:s})=>e.jsx(y,{searchable:!0,...s,size:"md",data:H,className:"w-[14.5rem]",onChange:(a,t)=>{Z(t.target.innerHTML),s.onChange(a)},onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-2 gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Price"}),e.jsx("input",{className:"w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",required:!0,type:"number",...l("price"),onChange:m})]}),e.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Minimum Purchase"}),e.jsx("input",{className:"w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",type:"number",...l("min_purchease"),onChange:m})]}),e.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"zip",className:"text-sm font-bold",children:"Maximum Purchase"}),e.jsx("input",{className:"w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",required:!0,type:"number",...l("max_purchease"),onChange:m})]}),e.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"zip",className:"text-sm font-bold",children:"Maximum Purchase"}),e.jsx("input",{className:"w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",required:!0,type:"number",...l("max_purchease"),onChange:m})]}),e.jsx("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-bold",children:"Discount"}),e.jsx("input",{className:"w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",required:!0,type:"number",...l("discount"),onChange:m})]}),e.jsxs("div",{className:"2xl:w-[100vh]",children:[e.jsx("label",{className:"text-sm font-bold",children:"Product Information"}),e.jsx(U,{className:"mt-2",toolbarConfig:ce,value:C,onChange:O}),e.jsxs("div",{className:"flex gap-2 mt-10",children:[e.jsx(M,{className:"2xl:w-[10rem]",appearance:"ghost",children:"Cancel"}),e.jsx(M,{type:"submit","aria-required":!0,appearance:"primary",className:"bg-blue-600 font-bold 2xl:h-[3rem] 2xl:w-[10rem] ",children:"Add Product"})]})]})]})})]})]})]})})})}export{De as default};
