import{u as I,a as w,r as u,f as k,a3 as D,b as _,c as E,d as F,j as e,S as L,B as o,L as f,P as R,U as P,g as B,M as n,h as M,I as y,k as j}from"./index-45535846.js";import{U as T}from"./SubCategoryServices-a908a357.js";function V(i,a){const r=new FileReader;r.onloadend=()=>{a(r.result)},r.readAsDataURL(i)}function q(){const i=I(s=>s.user.user),a=w(),[r,c]=u.useState(!1),[m,p]=u.useState(null),[x,b]=u.useState({fileUrl:""}),d=k();D();const t=_();console.log(t.state.myData);const{register:h,handleSubmit:N,reset:S,formState:{errors:A}}=E(),C=F(T),v=s=>{x.fileUrl!==""?s.image=x.fileUrl:s.image=t.state.myData.image;let l=t.state.myData.category_id,U=t.state.myData._id;C.mutate({data:s,token:i.jwt,cat_id:l,sub_cat_id:U},{onSuccess:g=>{a.push(e.jsx(n,{type:"success",children:" Category updated successfully"})),d(-1)},onError:g=>{console.log(g),a.push(e.jsx(n,{type:"error",children:"Category update failed ! Try Again."}))}}),S()};return e.jsx(e.Fragment,{children:e.jsxs(L,{justifyContent:"center",alignItems:"center",direction:"column",className:"mt-20 2xl:mt-[-3rem] ",style:{height:"100vh"},children:[e.jsxs(o,{className:"text-xl font-mono ",children:[e.jsx(o.Item,{as:f,to:"/dashbord",children:"Home"}),e.jsx(o.Item,{as:f,to:"/dashbord/all-company",children:"brand-list"}),e.jsx(o.Item,{className:"cursor-pointer hover:text-blue-500",onClick:()=>{d(-1)},children:"category-list"}),e.jsx(o.Item,{active:!0,className:"text-blue-400",children:"category-update"})]}),e.jsx(R,{bordered:!0,className:"shadow-sm w-[50rem] border-gray-300",style:{background:"#fff"},header:e.jsx("h3",{className:"font-bold bg-indigo-500 p-8 text-2xl text-white rounded-lg",children:"Edit Category Information"}),children:e.jsxs("form",{onSubmit:N(v),children:[e.jsx("div",{className:"flex justify-center items-center mb-10 ",children:e.jsx(P,{fileListVisible:!1,listType:"picture",action:`${B.endpoints.host}/upload`,onUpload:s=>{c(!0),V(s.blobFile,l=>{p(l)})},onSuccess:(s,l)=>{c(!1),a.push(e.jsx(n,{type:"success"})),b(s)},onError:()=>{p(null),c(!1),a.push(e.jsx(n,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[r&&e.jsx(M,{backdrop:!0,center:!0}),m?e.jsx("img",{src:m,width:"100%",height:"150%"}):e.jsx("img",{src:t.state.myData.image,alt:"Category Profile"})]})})}),e.jsx("div",{className:"flex  gap-5 justify-center",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Category Name"}),e.jsx(y,{defaultValue:t.state.myData.subcategory_name,...h("subcategory_name"),className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Category Information"}),e.jsx(y,{defaultValue:t.state.myData.description,...h("description"),as:"textarea",rows:3})]}),e.jsxs("div",{className:"2xl:mb-4 flex gap-2",children:[e.jsx(j,{appearance:"ghost",onClick:()=>d(-1),children:"Cancel"}),e.jsx(j,{type:"submit",appearance:"primary",className:"bg-blue-600",children:"Update  Category"})]})]})})]})})]})})}export{q as default};
