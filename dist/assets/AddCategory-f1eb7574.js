import{u as T,a as E,r as l,b as M,c as P,d as V,e as H,f as z,j as e,S as Q,B as c,L as y,P as $,U as q,g as G,M as i,h as J,C as K,I as x,i as S}from"./index-6fa3cfde.js";import{g as O}from"./BrandServices-f2eb3140.js";import{c as W}from"./CategoryService-3dbaf807.js";import{S as X}from"./SelectPicker-f691ebbc.js";function Y(o,n){const r=new FileReader;r.onloadend=()=>{n(r.result)},r.readAsDataURL(o)}function le(){var j,N;const o=T(s=>s.user.user),n=E(),[r,u]=l.useState(!1),[f,m]=l.useState(null),[h,v]=l.useState({fileUrl:""}),a=(j=M().state)==null?void 0:j.myData,{register:d,control:B,handleSubmit:I,reset:b,formState:{errors:D}}=P(),w=V(W),[g,_]=l.useState(null),[C,U]=l.useState(null),L=s=>{h.fileUrl!==""?s.image=h.fileUrl:s.image="",s.brand_id=g.split(",")[0],s.brand_slug=g.split(",")[1],s.brand_name=C,w.mutate({data:s,token:o.jwt},{onSuccess:t=>{n.push(e.jsx(i,{type:"success",children:"Category added successfully"})),m(null),b()},onError:t=>{console.log(t),n.push(e.jsx(i,{type:"error",children:t.response.data.message||t.message}))}}),b()},{data:p,status:ee}=H(["brandsIdName",o.jwt],O),k=[...((N=p==null?void 0:p.data)==null?void 0:N.map(s=>({label:s==null?void 0:s.name,value:s.id,slug:s.slug})))||["loading"]].map(s=>({label:s==null?void 0:s.label,value:(s==null?void 0:s.value)+","+s.slug})),F=z();function A(){F("/dashbord/all-company")}return e.jsx(e.Fragment,{children:e.jsxs(Q,{justifyContent:"center",alignItems:"center",direction:"column",className:"mt-20 2xl:mt-[-3rem] ",style:{height:"100vh"},children:[e.jsxs(c,{className:"text-xl font-mono ",children:[e.jsx(c.Item,{as:y,to:"/dashbord",children:"Home"}),e.jsx(c.Item,{as:y,to:"/dashbord/category/all",children:"brand-list"}),e.jsx(c.Item,{active:!0,className:"text-blue-400",children:"brand-creation"})]}),e.jsx($,{bordered:!0,className:"shadow-sm w-[45rem]",header:e.jsx("h3",{className:"font-bold bg-indigo-700 p-8 text-2xl text-white rounded-lg",children:"Add Brand Information"}),children:e.jsxs("form",{onSubmit:I(L),children:[e.jsx("div",{className:"flex justify-center items-center mb-10 ",children:e.jsx(q,{fileListVisible:!1,listType:"picture",action:`${G.endpoints.host}/upload`,onUpload:s=>{u(!0),Y(s.blobFile,t=>{m(t)})},onSuccess:(s,t)=>{u(!1),n.push(e.jsx(i,{type:"success"})),v(s)},onError:()=>{m(null),u(!1),n.push(e.jsx(i,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[r&&e.jsx(J,{backdrop:!0,center:!0}),f?e.jsx("img",{src:f,width:"100%",height:"150%"}):e.jsx("img",{src:a==null?void 0:a.profilePicture,alt:"Brand Logo"})]})})}),e.jsx("div",{className:"flex  gap-5 justify-center",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Company"}),e.jsx(K,{name:"brand_id",...d("brand_id"),control:B,render:({field:s})=>e.jsx(X,{searchable:!0,...s,size:"md",data:k,className:"w-96",onChange:(t,R)=>{s.onChange(t),U(R.target.innerHTML),_(t)},onBlur:()=>s.onBlur()})})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Brand Name"}),e.jsx(x,{...d("category_label"),defaultValue:a==null?void 0:a.firstName,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Brand Type"}),e.jsx(x,{...d("category_type"),defaultValue:a==null?void 0:a.firstName,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Brand Information"}),e.jsx(x,{defaultValue:a==null?void 0:a.description,...d("category_description"),as:"textarea",rows:3})]}),e.jsxs("div",{className:"2xl:mb-4 flex gap-2 ",children:[e.jsx(S,{appearance:"ghost",className:"font-bold",onClick:()=>A(),children:"Cancel"}),e.jsx(S,{type:"submit",appearance:"primary",className:"bg-blue-600 font-bold",children:"Add Brand"})]})]})})]})})]})})}export{le as default};
