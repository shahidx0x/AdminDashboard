import{u as R,r as n,a as V,b as M,j as e,S as P,L as y,c as A,B as N}from"./index-9fd1c950.js";import{u as H,C as z}from"./index.esm-53d076ec.js";import{u as Q}from"./find-0a08b125.js";import{u as $}from"./useQuery-a9ae40a9.js";import{g as q}from"./BrandServices-8ee56d58.js";import{u as G}from"./CategoryService-d66eff77.js";import{c as J}from"./api.config-65890cae.js";import{u as K}from"./useToaster-cb945763.js";import{B as c}from"./Breadcrumb-91551d10.js";import{P as O}from"./Panel-11ed0373.js";import{U as W,I as f}from"./Uploader-f69c95a0.js";import{M as u}from"./toaster-1871e3f9.js";import{S as X}from"./SelectPicker-a894b17c.js";import"./AngleDown-87ba3808.js";import"./statusIcons-23546098.js";import"./propTypes-612c656a.js";import"./isArrayLikeObject-bbfbf98f.js";function Y(l,a){const o=new FileReader;o.onloadend=()=>{a(o.result)},o.readAsDataURL(l)}function je(){var b,j;const l=R(s=>s.user.user),a=K(),[o,m]=n.useState(!1),[g,x]=n.useState(null),[h,S]=n.useState({fileUrl:""}),r=(b=V().state)==null?void 0:b.myData,{register:i,control:C,handleSubmit:_,reset:v,formState:{errors:D}}=H(),I=Q(G),[w,U]=n.useState(null),[B,k]=n.useState(null),L=s=>{h.fileUrl!==""?s.image=h.fileUrl:s.image="",s.brand_id=w,s.brand_name=B,s.id=r==null?void 0:r._id;let t=r==null?void 0:r._id;I.mutate({data:s,token:l.jwt,id:t},{onSuccess:d=>{a.push(e.jsx(u,{type:"success",children:"Category updated successfully"}))},onError:d=>{console.log(d),a.push(e.jsx(u,{type:"error",children:"Category update failed ! Try Again."}))}}),v()},{data:p,status:ee}=$(["brandsIdName",l.jwt],q),E=[...((j=p==null?void 0:p.data)==null?void 0:j.map(s=>({label:s==null?void 0:s.name,value:s.id})))||["loading"]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),F=M();function T(){F("/dashbord/category/all")}return e.jsx(e.Fragment,{children:e.jsxs(P,{justifyContent:"center",alignItems:"center",direction:"column",className:"-mt-10",style:{height:"100vh"},children:[e.jsxs(c,{className:"text-xl font-mono ",children:[e.jsx(c.Item,{as:y,to:"/dashbord",children:"Home"}),e.jsx(c.Item,{as:y,to:"/dashbord/category/all",children:"category-list"}),e.jsx(c.Item,{active:!0,className:"text-blue-400",children:"category-update"})]}),e.jsx(O,{bordered:!0,className:"shadow-md w-[40rem] border-gray-400",style:{background:"#fff"},header:e.jsx("h3",{className:"font-bold bg-indigo-500 text-white p-3 rounded-md text-2xl ",children:"Edit Category Information"}),children:e.jsxs("form",{onSubmit:_(L),children:[e.jsx("div",{className:"flex justify-center items-center mb-8",children:e.jsx(W,{fileListVisible:!1,listType:"picture",action:`${J.endpoints.host}/upload`,onUpload:s=>{m(!0),Y(s.blobFile,t=>{x(t)})},onSuccess:(s,t)=>{m(!1),a.push(e.jsx(u,{type:"success"})),S(s)},onError:()=>{x(null),m(!1),a.push(e.jsx(u,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[o&&e.jsx(A,{backdrop:!0,center:!0}),g?e.jsx("img",{src:g,width:"100%",height:"150%"}):e.jsx("img",{src:r==null?void 0:r.image,alt:"Category Profile"})]})})}),e.jsx("div",{className:"flex gap-5 justify-center",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Company"}),e.jsx(z,{name:"brand_id",...i("brand_id"),control:C,defaultValue:r==null?void 0:r.brand_name,render:({field:s})=>e.jsx(X,{searchable:!0,...s,size:"md",data:E,className:"w-96",onChange:(t,d)=>{s.onChange(t),k(d.target.innerHTML),U(t)},onBlur:()=>s.onBlur()})})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Category Name"}),e.jsx(f,{...i("category_label"),defaultValue:r==null?void 0:r.category_label,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Category Type"}),e.jsx(f,{...i("category_type"),defaultValue:r==null?void 0:r.category_type,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Category Information"}),e.jsx(f,{defaultValue:r==null?void 0:r.category_description,...i("category_description"),as:"textarea",rows:3})]}),e.jsxs("div",{className:" flex gap-2 mb-9",children:[e.jsx(N,{appearance:"ghost",onClick:()=>T(),children:"Cancel"}),e.jsx(N,{type:"submit",appearance:"primary",className:"bg-blue-600",children:"Update Category"})]})]})})]})})]})})}export{je as default};
