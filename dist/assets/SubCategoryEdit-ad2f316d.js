import{u as w,r as d,b as k,t as D,a as _,j as e,S as E,L as g,c as F,B as b}from"./index-45bd0b18.js";import{u as L}from"./index.esm-8d42596e.js";import{u as R}from"./find-c3818947.js";import{U as B}from"./SubCategoryServices-d6aa268c.js";import{c as P}from"./api.config-65890cae.js";import{u as M}from"./useToaster-8c146127.js";import{B as o}from"./Breadcrumb-6172fe58.js";import{P as T}from"./Panel-9e34cf8c.js";import{U as V,I as y}from"./Uploader-5d1dfb1a.js";import{M as l}from"./toaster-3317b793.js";import"./AngleDown-9c7cb1f2.js";import"./statusIcons-c1debc2b.js";function A(n,s){const r=new FileReader;r.onloadend=()=>{s(r.result)},r.readAsDataURL(n)}function ee(){const n=w(t=>t.user.user),s=M(),[r,c]=d.useState(!1),[m,p]=d.useState(null),[f,j]=d.useState({fileUrl:""}),u=k();D();const a=_();console.log(a.state.myData);const{register:x,handleSubmit:S,reset:N,formState:{errors:H}}=L(),C=R(B),v=t=>{f.fileUrl!==""?t.image=f.fileUrl:t.image="";let i=a.state.myData.category_id,I=a.state.myData._id;C.mutate({data:t,token:n.jwt,cat_id:i,sub_cat_id:I},{onSuccess:h=>{s.push(e.jsx(l,{type:"success",children:"Sub Category updated successfully"})),u(-1)},onError:h=>{console.log(h),s.push(e.jsx(l,{type:"error",children:"Sub Category update failed ! Try Again."}))}}),N()};function U(){u(-1)}return e.jsx(e.Fragment,{children:e.jsxs(E,{justifyContent:"center",alignItems:"center",direction:"column",className:"mt-20 2xl:mt-[-3rem] ",style:{height:"100vh"},children:[e.jsxs(o,{className:"text-xl font-mono ",children:[e.jsx(o.Item,{as:g,to:"/dashbord",children:"Home"}),e.jsx(o.Item,{as:g,to:"/dashbord/all-company",children:"category-list"}),e.jsx(o.Item,{className:"cursor-pointer hover:text-blue-500",onClick:()=>{u(-1)},children:"sub-category-list"}),e.jsx(o.Item,{active:!0,className:"text-blue-400",children:"sub-category-update"})]}),e.jsx(T,{bordered:!0,className:"shadow-sm w-[50rem] border-gray-300",style:{background:"#fff"},header:e.jsx("h3",{className:"font-bold bg-indigo-500 p-8 text-2xl text-white rounded-lg",children:"Edit Sub Category Information"}),children:e.jsxs("form",{onSubmit:S(v),children:[e.jsx("div",{className:"flex justify-center items-center mb-10 ",children:e.jsx(V,{fileListVisible:!1,listType:"picture",action:`${P.endpoints.host}/upload`,onUpload:t=>{c(!0),A(t.blobFile,i=>{p(i)})},onSuccess:(t,i)=>{c(!1),s.push(e.jsx(l,{type:"success"})),j(t)},onError:()=>{p(null),c(!1),s.push(e.jsx(l,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[r&&e.jsx(F,{backdrop:!0,center:!0}),m?e.jsx("img",{src:m,width:"100%",height:"150%"}):e.jsx("img",{src:a.state.myData.image,alt:"Category Profile"})]})})}),e.jsx("div",{className:"flex  gap-5 justify-center",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Sub Category Name"}),e.jsx(y,{defaultValue:a.state.myData.subcategory_name,...x("subcategory_name"),className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Sub Category Information"}),e.jsx(y,{defaultValue:a.state.myData.description,...x("description"),as:"textarea",rows:3})]}),e.jsxs("div",{className:"2xl:mb-4 flex gap-2",children:[e.jsx(b,{appearance:"ghost",onClick:()=>U(),children:"Cancel"}),e.jsx(b,{type:"submit",appearance:"primary",className:"bg-blue-600",children:"Update Sub Category"})]})]})})]})})]})})}export{ee as default};
