import{r,u as he,b as ue,j as e,M as p,B as I,R as me,A as xe}from"./index-9fd1c950.js";import{I as pe,_ as je}from"./index-68e9a1da.js";import{u as K}from"./find-0a08b125.js";import{u as fe}from"./useQuery-a9ae40a9.js";import{g as ge,d as ye}from"./ProductService-133937d5.js";import{g as Ce}from"./UserServices-ac82392b.js";import{T as ke,D as i,S as be,a as M}from"./settings-d9a805d6.js";import{T as x}from"./Toggle-15aa0d1e.js";import{t as P,M as R}from"./toaster-1871e3f9.js";import"./AngleDown-87ba3808.js";import"./api.config-65890cae.js";import"./propTypes-612c656a.js";import"./isArrayLikeObject-bbfbf98f.js";import"./merge-1a1c034c.js";import"./createLucideIcon-de2e742d.js";import"./statusIcons-23546098.js";function Qe(){var _;const[h,O]=r.useState(!0),[j,B]=r.useState(!0),[A,ve]=r.useState(!1),[k,b]=r.useState(1),[v,E]=r.useState(!0),[f,T]=r.useState(!0),[W,we]=r.useState(!1),[w,D]=r.useState(!0),g=he(t=>t.user.user),[F,V]=r.useState(""),[q,N]=r.useState(!1),[Q,y]=r.useState(!1),[U,$]=r.useState(null),{Column:z,HeaderCell:S,Cell:d}=M,G=ue(),J=t=>e.jsx(d,{...t,style:{padding:4}}),X=t=>e.jsx(S,{...t,style:{padding:4},children:e.jsx("div",{className:"flex justify-center font-bold",children:t.children})}),l=({rowData:t,icon:s,dataKey:o,...c})=>{let m="";return s&&(m=s),e.jsx(d,{...c,children:e.jsx("p",{className:m?"flex justify-center items-center font-bold":"flex justify-center items-center",children:m+" "+t[o]})})},C=[{key:"product_image",label:"Product Image",cellRenderer:({rowData:t,dataKey:s,...o})=>e.jsx(d,{...o,children:e.jsx("div",{className:"flex justify-center -mt-2",children:e.jsx(xe,{className:"",src:(t==null?void 0:t.product_image)||"https://avatars.githubusercontent.com/u/12592949",alt:"P"})})}),width:90},{key:"name",label:"Name",cellRenderer:({rowData:t,...s})=>e.jsx(d,{...s,children:e.jsx("p",{className:"flex justify-center items-center",children:t.name})}),width:190},{key:"brand_name",label:"Brand Name",cellRenderer:t=>e.jsx(l,{...t,dataKey:"brand_name"}),width:150},{key:"category_name",label:"Category",cellRenderer:t=>e.jsx(l,{...t,dataKey:"category_name"}),width:150},{key:"subcategory_name",label:"Sub Category",cellRenderer:t=>e.jsx(l,{...t,dataKey:"subcategory_name"}),width:150},{key:"price",label:"Price",cellRenderer:t=>e.jsx(l,{...t,dataKey:"price",icon:"$"}),width:140},{key:"min_purchease",label:"Minimum Purchase",cellRenderer:t=>e.jsx(l,{...t,dataKey:"min_purchease"}),width:140},{key:"max_purchease",label:"Maximum Purchase",cellRenderer:t=>e.jsx(l,{...t,dataKey:"max_purchease"}),width:140},{key:"product_information",label:"Description",cellRenderer:t=>e.jsx(l,{...t,dataKey:"product_information"}),width:200},{key:"actions",label:"Actions",cellRenderer:({rowData:t,...s})=>{const o=()=>{G("/dashbord/product/edit",{state:{myData:t}})},c=()=>{Z(),$(t._id)};return e.jsx(d,{...s,children:e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("button",{className:"text-blue-500 border px-3 py-2 -mt-1 hover:text-white hover:bg-indigo-500 rounded-lg",onClick:o,children:"Edit"}),e.jsx("button",{className:"text-red-500 border px-3 py-2 -mt-1 hover:text-white hover:bg-red-500 rounded-lg",onClick:c,children:"Delete"})]})})},width:200}],{data:n,status:Y,refetch:u,error:He}=fe(["products",k,g.jwt],ge,{cacheTime:0}),Z=()=>{y(!0)},ee=K(ye),te=()=>{ee.mutate({id:U,token:g.jwt},{onSuccess:t=>{P.push(e.jsx(R,{type:"success",children:"Product deleted successfully"})),u()},onError:t=>{P.push(e.jsx(R,{type:"error",children:"Product delete failed !"}))}}),y(!1),u()},a=K(Ce),se=t=>{const s=t.target.value;V(s),s===""&&(u(),N(!1))},re=()=>{N(!0),je.promise(a.mutateAsync({queryKey:["product_search",F,g.jwt]}),{loading:"Searching...",success:e.jsx("b",{children:"Product found!"}),error:e.jsx("b",{children:"Product not found in the database!"})})},ne=q&&(a!=null&&a.data)?[a==null?void 0:a.data]:n==null?void 0:n.data,[L,le]=r.useState(C.map(t=>t.key)),ae=C.filter(t=>L.some(s=>s===t.key)),oe=h?J:d,de=h?X:S,ce=()=>{b(t=>{var s;return t<((s=n==null?void 0:n.meta)==null?void 0:s.total_page)?t+1:t}),u()},ie=()=>{b(t=>Math.max(t-1,1)),u()},H=()=>y(!1);return e.jsxs("div",{children:[e.jsx(pe,{}),e.jsxs(p,{open:Q,onClose:H,children:[e.jsx(p.Header,{className:"p-5",children:e.jsx(p.Title,{children:"Are you sure you want delete this product ?"})}),e.jsxs(p.Footer,{children:[e.jsx(I,{onClick:te,className:"bg-blue-500 w-20",appearance:"primary",children:"Confirm"}),e.jsx(I,{className:" bg-red-500 text-white",onClick:H,children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsx("hr",{}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex gap-3 flex-col 2xl:flex-row 2xl:justify-between",children:[e.jsxs("div",{className:"",children:[e.jsx(ke,{className:"h-12",data:C,labelKey:"label",valueKey:"key",value:L,onChange:le,cleanable:!1}),e.jsxs(i,{className:"",icon:e.jsx(be,{}),children:[e.jsx(i.Item,{children:e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{children:"Compact："}),e.jsx(x,{checkedChildren:"On",unCheckedChildren:"Off",checked:h,onChange:O})]})}),e.jsx(i.Item,{children:e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{children:"Bordered："}),e.jsx(x,{checkedChildren:"On",unCheckedChildren:"Off",checked:j,onChange:B})]})}),e.jsx(i.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Show Header：",e.jsx(x,{checkedChildren:"On",unCheckedChildren:"Off",checked:v,onChange:E})]})}),e.jsx(i.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Hover：",e.jsx(x,{checkedChildren:"On",unCheckedChildren:"Off",checked:w,onChange:D})]})}),e.jsx(i.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Auto Height：",e.jsx(x,{checkedChildren:"On",unCheckedChildren:"Off",checked:f,onChange:T})]})})]})]}),e.jsx("div",{children:e.jsx("div",{className:" ",children:e.jsx("div",{className:"flex space-x-4  rounded-md",children:e.jsxs("div",{className:"flex rounded-md overflow-hidden h-12 w-full",children:[e.jsx("input",{onChange:t=>se(t),type:"text",className:"w-[20rem] border-2 text-md p-2 text-xl  rounded-md rounded-r-none"}),e.jsx("button",{onClick:re,className:"bg-indigo-600 text-white px-6 text-lg font-semibold py-2 rounded-r-md",children:"Search"})]})})})})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-5 ml-5",style:{height:f?"auto":400},children:[e.jsx(M,{loading:Y==="loading",height:300,hover:w,fillHeight:W,showHeader:v,autoHeight:f,data:A?[]:ne,bordered:j,cellBordered:j,headerHeight:h?40:30,rowHeight:h?56:30,children:ae.map(t=>{const{key:s,label:o,cellRenderer:c,...m}=t;return r.createElement(z,{...m,key:s},e.jsx(de,{children:o}),c?me.createElement(c,{dataKey:s}):e.jsx(oe,{dataKey:s}))})}),e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex items-center justify-center py-10 lg:px-0 sm:px-6 px-4",children:e.jsxs("div",{className:"lg:w-3/5 w-full  flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4L4.49984 7.33333",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4.00002L4.49984 0.666687",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("p",{onClick:ie,className:"text-sm ml-3 font-medium leading-none ",children:"Previous"})]}),e.jsx("div",{className:"sm:flex hidden",children:e.jsxs("p",{className:"text-sm font-bold leading-none cursor-pointer text-gray-600 hover:text-indigo-700 border-t border-transparent hover:border-indigo-400 pt-3 mr-4 px-2",children:["pages : ",k,"/",(_=n==null?void 0:n.meta)==null?void 0:_.total_page]})}),e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsx("p",{onClick:ce,className:"text-sm font-medium leading-none mr-3",children:"Next"}),e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 7.33333L12.8333 4",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 0.666687L12.8333 4.00002",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})})})]})]})]})}export{Qe as default};
