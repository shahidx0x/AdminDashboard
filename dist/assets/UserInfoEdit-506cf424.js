import{u as F,a as L,r as f,b as E,c as z,d as T,f as M,j as e,S as R,P as G,B as i,L as g,a5 as H,U as Z,g as $,M as d,h as q,I as c,C as m,n as J,i as v,s as K}from"./index-1fa5fa07.js";import{S as w}from"./SelectPicker-5f81d416.js";function O(u,t){const o=new FileReader;o.onloadend=()=>{t(o.result)},o.readAsDataURL(u)}function D(){var N;const u=F(l=>l.user.user),t=L(),[o,x]=f.useState(!1),[j,p]=f.useState(null),[r,U]=f.useState({fileUrl:""}),s=(N=E().state)==null?void 0:N.myData,{register:n,control:h,watch:C,handleSubmit:S,formState:{errors:W}}=z({defaultValues:{isAccountActive:s==null?void 0:s.isAccountActive}});C("isAccountActive");const A=T(K),V=l=>{r.fileUrl!==""?l.profilePicture=r.fileUrl:l.profilePicture="",A.mutate({data:l,token:u.jwt},{onSuccess:a=>{t.push(e.jsx(d,{type:"success",children:"Updated successfully"})),b(-1)},onError:a=>{t.push(e.jsx(d,{type:"error",children:"Update failed !"}))}})},k=["admin","user"].map(l=>({label:l,value:l})),B=["Gold","Bronze"].map(l=>({label:l,value:l})),b=M();function I(){b("/dashbord/user-table")}return e.jsx(e.Fragment,{children:e.jsx(R,{justifyContent:"center",alignItems:"center",direction:"column",className:"mt-14 2xl:-ml-28 px-8 w-full",children:e.jsx(G,{bordered:!0,className:"shadow-sm -mt-10 border-l-8 border-l-indigo-400",style:{background:"#fff"},header:e.jsxs(e.Fragment,{children:[e.jsxs(i,{className:"text-sm font-mono",children:[e.jsx(i.Item,{as:g,to:"/dashbord",children:"Home"}),e.jsx(i.Item,{as:g,to:"/dashbord/user-table",children:"user-list"}),e.jsx(i.Item,{active:!0,className:"text-blue-400",children:"user-information-edit"})]}),e.jsx("h3",{className:"font-bold p-5 text-2xl bg-indigo-500 rounded-lg text-white",children:"Update User Information"})]}),children:e.jsxs("form",{onSubmit:S(V),children:[e.jsx("div",{className:"flex  flex-col justify-center items-center mb-10",children:e.jsx(H,{color:(r==null?void 0:r.fileUrl)!==""?"green":"red",content:(r==null?void 0:r.fileUrl)!==""&&"uploaded",children:e.jsx(Z,{fileListVisible:!1,listType:"picture",action:`${$.endpoints.host}/upload`,onUpload:l=>{x(!0),O(l.blobFile,a=>{p(a)})},onSuccess:(l,a)=>{x(!1),t.push(e.jsx(d,{type:"success"})),U(l)},onError:()=>{p(null),x(!1),t.push(e.jsx(d,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[o&&e.jsx(q,{backdrop:!0,center:!0}),j?e.jsx("img",{src:j,width:"100%",height:"150%"}):e.jsx("img",{src:s==null?void 0:s.profilePicture,alt:"Profile Picture"})]})})})}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex  p-5",children:e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"First Name"}),e.jsx(c,{...n("firstName"),defaultValue:s==null?void 0:s.firstName,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Last Name"}),e.jsx(c,{...n("lastName"),defaultValue:s==null?void 0:s.lastName,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Email"}),e.jsx(c,{value:s==null?void 0:s.email,...n("email"),className:"w-56"})]}),e.jsx("div",{children:e.jsxs("div",{className:"",children:[e.jsx("p",{className:"font-bold",children:"Subscription"}),e.jsx(m,{name:"subscription",control:h,defaultValue:s==null?void 0:s.subscription,render:({field:l})=>e.jsx(w,{searchable:!1,...l,size:"md",data:B,className:"w-56",onChange:a=>l.onChange(a),onBlur:()=>l.onBlur()})})]})}),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"font-bold",children:"Role"}),e.jsx(m,{name:"role",control:h,defaultValue:s==null?void 0:s.role,render:({field:l})=>e.jsx(w,{searchable:!1,...l,size:"md",data:k,className:"w-56",onChange:a=>l.onChange(a),onBlur:()=>l.onBlur()})})]})]})}),e.jsxs("div",{className:"flex  p-5 flex-col 2xl:flex-row gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Cart Number"}),e.jsx(c,{...n("cartNumber"),defaultValue:s==null?void 0:s.cartNumber,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Zip Code"}),e.jsx(c,{...n("zipCode"),defaultValue:s==null?void 0:s.zipCode,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Company"}),e.jsx(c,{...n("company"),defaultValue:s==null?void 0:s.company,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Phone Number"}),e.jsx(c,{...n("phoneNumber"),defaultValue:(s==null?void 0:s.phoneNumber)||"Not Available",className:"w-56"})]}),e.jsx("div",{className:"flex gap-5",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Location"}),e.jsx(c,{...n("location"),defaultValue:s==null?void 0:s.location,className:"w-56"})]})})]}),e.jsxs("div",{className:"mt-10 flex gap-5",children:[e.jsx("p",{className:"font-bold",children:"Account Activation Status :"}),e.jsx(m,{name:"isAccountActive",control:h,render:({field:{onChange:l,onBlur:a,value:P,name:X,ref:Y}})=>e.jsx(J,{defaultChecked:P,onChange:l,checkedChildren:"Active",unCheckedChildren:"Not Active"})})]}),e.jsxs("div",{className:"mt-5 flex gap-5",children:[e.jsx(v,{appearance:"ghost",onClick:()=>I(),children:"Cancel"}),e.jsx(v,{type:"submit",appearance:"primary",className:"bg-blue-600",children:"Update"})]})]})]})})})})}export{D as default};
