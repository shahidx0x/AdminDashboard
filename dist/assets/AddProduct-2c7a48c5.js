import{u as le,r,j as e,L as u,c as te,B as U}from"./index-2a630384.js";import{u as oe,C as f}from"./index.esm-c05df9d3.js";import{u as ne}from"./find-1465f6ef.js";import{u as j}from"./useQuery-a04f591a.js";import{R as M,t as ce}from"./toolbar.config-8b1afecb.js";import{g as de}from"./BrandServices-40cf72d4.js";import{a as me}from"./CategoryService-21df62d7.js";import{c as ie}from"./ProductService-133937d5.js";import{g as ue}from"./SubCategoryServices-d6aa268c.js";import{c as F}from"./api.config-65890cae.js";import{u as pe}from"./useToaster-62862576.js";import{B as o}from"./Breadcrumb-06a9fa70.js";import{U as E}from"./Uploader-79e0a817.js";import{M as N}from"./toaster-693b3d00.js";import{c as xe}from"./createLucideIcon-0a5d818f.js";import{I as be}from"./Input-83625a3a.js";import{S as y}from"./SelectPicker-d3e852e4.js";import"./utils-0507c293.js";import"./statusIcons-d8331d20.js";import"./propTypes-d2318a45.js";import"./isArrayLikeObject-cfd34475.js";import"./AngleDown-19af4c83.js";const ge=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function he(n,c){const d=new FileReader;d.onloadend=()=>{c(d.result)},d.readAsDataURL(n)}function Oe(){var I,B,P;const n=le(s=>s.user.user),c=pe(),[d,p]=r.useState(!1),[w,x]=r.useState({product_image:""}),[L,S]=r.useState([]),[R,v]=r.useState(null),[T,k]=r.useState("brand"),[A,q]=r.useState(""),{data:b}=j(["brandsIdName",n.jwt],de),{data:m}=j(["categoryIdName","",n.jwt,T,-1],me);console.log(m);const{data:g}=j(["subCategoryIdName","",n.jwt,A,-1],ue),H=(I=m==null?void 0:m.data)==null?void 0:I.map(s=>({label:s==null?void 0:s.category_label,value:s._id})),z=(B=g==null?void 0:g.data)==null?void 0:B.map(s=>({label:s==null?void 0:s.subcategory_name,value:s._id})),V=[...((P=b==null?void 0:b.data)==null?void 0:P.map(s=>({label:s==null?void 0:s.name,value:s.id})))||["loading"]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),$=[...H||[{label:"No Category",value:"no-category"}]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),[C,D]=r.useState(M.createEmptyValue()),O=s=>{s&&D(s)},{register:t,control:h,reset:je,handleSubmit:Q,formState:{errors:Ne}}=oe({}),G=ne(ie),[J,K]=r.useState("No Brand"),[W,X]=r.useState("No Category"),[Y,Z]=r.useState("No Sub Category"),ee=e.jsx(N,{showIcon:!0,type:"success",closable:!0,children:"Success : Product Added Successfully."}),se=e.jsx(N,{showIcon:!0,type:"error",closable:!0,children:"Error : Product Added Failed !."}),ae=s=>{const a=C.toString("html");s.fet_image=[...L],s.product_image=R,s.brand_name=J,s.category_name=W,s.subcategory_name=Y,s.product_information=a,G.mutate({data:s,token:n.jwt},{onSuccess:l=>{c.push(ee,{placement:"bottomStart",duration:2e3}),x(null),v(null),S(null)},onError:l=>{c.push(se,{placement:"bottomStart",duration:3e3})}}),setTimeout(()=>{window.location.reload()},1500)},[ye,re]=r.useState(""),[we,_]=r.useState(null),i=s=>{/^\d*$/.test(s)?(re(s),_("")):_("Only numeric values are allowed")};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"p-6 bg-base-100 text-gray-900 h-screen ",children:e.jsxs("form",{onSubmit:Q(ae),className:"container flex flex-col mx-auto space-y-12 ",children:[e.jsxs("fieldset",{className:" grid grid-cols-4 gap-6 p-24 border-l-8 border-l-indigo-400 border-b-2 border-t hover:shadow-md rounded-md shadow-sm bg-base-50",children:[e.jsxs("div",{className:"space-y-2 col-span-full lg:col-span-1",children:[e.jsxs(o,{className:"text-sm",children:[e.jsx(o.Item,{as:u,to:"/dashbord",children:"Home"}),e.jsx(o.Item,{as:u,to:"/dashbord/product/list",children:"product-list"}),e.jsx(o.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),e.jsx("p",{className:"font-thin text-3xl",children:"Product & Feature Images"})]}),e.jsx("div",{className:"flex  flex-col flex-wrap gap-4 col-span-full lg:col-span-3",children:e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-10",children:[e.jsxs("div",{className:"col-span-full sm:col-span-3",children:[e.jsx("p",{className:"font-bold font-mono text-sm underline",children:"Upload Product Image"}),e.jsx(E,{fileListVisible:!1,listType:"picture",action:`${F.endpoints.host}/upload`,onUpload:s=>{p(!0),he(s.blobFile,a=>{x(l=>({...l,product_image:a}))})},onSuccess:(s,a)=>{p(!1),v(s.fileUrl)},onError:()=>{x(null),p(!1),c.push(e.jsx(N,{type:"error",children:"Upload failed"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[d&&e.jsx(te,{backdrop:!0,center:!0}),w?e.jsx("img",{src:w.product_image,width:"100%",height:"150%",alt:"product_picture"}):e.jsx("img",{src:"https://www.ivins.com/wp-content/uploads/2020/09/placeholder-1.png",alt:"product_picture"})]})})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("p",{className:"font-bold font-mono text-sm underline",children:"Upload Product Feature Image"}),e.jsx(E,{multiple:!0,listType:"picture",action:`${F.endpoints.host}/upload`,onSuccess:s=>S(a=>[...a,s.fileUrl]),children:e.jsx("button",{type:"button",children:e.jsx(ge,{})})})]})]})})]}),e.jsxs("fieldset",{className:"  grid grid-cols-4 gap-6 px-16 2xl:px-24 py-5 border-l-8 border-l-indigo-400 border-b-2 border-t hover:shadow-md rounded-md shadow-sm bg-base-50",children:[e.jsxs("div",{className:"space-y-2 col-span-full lg:col-span-1",children:[e.jsxs(o,{className:"text-sm",children:[e.jsx(o.Item,{as:u,to:"/dashbord",children:"Home"}),e.jsx(o.Item,{as:u,to:"/dashbord/product/list",children:"product-list"}),e.jsx(o.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),e.jsx("p",{className:"font-thin  text-3xl",children:"Product Inormation"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 col-span-full lg:col-span-3",children:[e.jsxs("div",{className:"col-span-full sm:col-span-3 flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Product Name"}),e.jsx(be,{required:!0,className:"w-[12rem] 2xl:w-[14.5rem]",...t("name")}),e.jsx("div",{"data-lastpass-icon-root":"true"})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-3 gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Select Company"}),e.jsx(f,{name:"brand_id",...t("brand_id"),control:h,render:({field:s})=>e.jsx(y,{searchable:!0,...s,size:"md",data:V,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(a,l)=>{s.onChange(a),k(a),K(l.target.innerHTML)},onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-3 gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Category"}),e.jsx(f,{name:"category_id",...t("category_id"),control:h,render:({field:s})=>e.jsx(y,{searchable:!0,...s,size:"md",data:$,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(a,l)=>{s.onChange(a),X(l.target.innerHTML),q(a)},onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{className:"col-span-full flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Subcategory"}),e.jsx(f,{name:"sub_category_id",...t("subcategory_id"),control:h,render:({field:s})=>e.jsx(y,{searchable:!0,...s,size:"md",data:z,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(a,l)=>{Z(l.target.innerHTML),s.onChange(a)},onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-2 gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Price"}),e.jsx("input",{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",required:!0,type:"number",...t("price"),onChange:i})]}),e.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-bold",children:"Minimum Purchase"}),e.jsx("input",{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",type:"number",...t("min_purchease"),onChange:i})]}),e.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"zip",className:"text-sm font-bold",children:"Maximum Purchase"}),e.jsx("input",{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",required:!0,type:"number",...t("max_purchease"),onChange:i})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-bold",children:"Discount"}),e.jsx("input",{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 p-3",required:!0,type:"number",...t("discount"),onChange:i})]}),e.jsx("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:e.jsx("div",{className:"flex flex-col gap-5",children:e.jsxs("div",{className:"2xl:w-[100vh]",children:[e.jsx("label",{className:"text-sm font-bold",children:"Product Information"}),e.jsx(M,{className:"mt-2",toolbarConfig:ce,value:C,onChange:O}),e.jsxs("div",{className:"flex gap-2 mt-10",children:[e.jsx(U,{className:"2xl:w-[10rem]",appearance:"ghost",children:"Cancel"}),e.jsx(U,{type:"submit","aria-required":!0,appearance:"primary",className:"bg-blue-600 font-bold 2xl:h-[3rem] 2xl:w-[10rem] ",children:"Add Product"})]})]})})})]})]})]})})})}export{Oe as default};
