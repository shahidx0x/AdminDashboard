import{u as D,a as ee,r as n,b as se,j as e,S as re,c as B,B as I}from"./index-45bd0b18.js";import{u as ae,C as N}from"./index.esm-8d42596e.js";import{u as te}from"./find-c3818947.js";import{u as y}from"./useQuery-ea9946a5.js";import{g as oe}from"./BrandServices-8ee56d58.js";import{a as ne}from"./CategoryService-d66eff77.js";import{c as le}from"./ProductService-133937d5.js";import{g as de}from"./SubCategoryServices-d6aa268c.js";import{c as U}from"./api.config-65890cae.js";import{u as ce}from"./useToaster-8c146127.js";import{P as ie}from"./Panel-9e34cf8c.js";import{U as P,I as l}from"./Uploader-5d1dfb1a.js";import{M as x}from"./toaster-3317b793.js";import{S as _}from"./SelectPicker-7cd71d62.js";import"./AngleDown-9c7cb1f2.js";import"./statusIcons-c1debc2b.js";import"./propTypes-8a62bd57.js";import"./isArrayLikeObject-31c550f5.js";function q(d,c){const m=new FileReader;m.onloadend=()=>{c(m.result)},m.readAsDataURL(d)}function qe(){var v,C,w;const d=D(s=>s.user.user),c=ce(),a=ee().state.myData;console.log(a);const[S,i]=n.useState(!1),[p,u]=n.useState({product_image:a==null?void 0:a.product_image}),[F,L]=n.useState([]),[M,g]=n.useState(null),[R,k]=n.useState("brand"),[E,T]=n.useState(""),{data:h}=y(["brandsIdName",d.jwt],oe),{data:j}=y(["categoryIdName","",d.jwt,R,-1],ne),{data:b}=y(["subCategoryIdName","",d.jwt,E,-1],de),z=(v=j==null?void 0:j.data)==null?void 0:v.map(s=>({label:s==null?void 0:s.category_label,value:s._id})),H=(C=b==null?void 0:b.data)==null?void 0:C.map(s=>({label:s==null?void 0:s.subcategory_name,value:s._id})),A=[...((w=h==null?void 0:h.data)==null?void 0:w.map(s=>({label:s==null?void 0:s.name,value:s.id})))||["loading"]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),V=[...z||[{label:"No Category",value:"no-category"}]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),{register:t,control:f,reset:$,handleSubmit:Q,formState:{errors:me}}=ae(),G=te(le),[J,K]=n.useState("No Brand"),[O,W]=n.useState("No Category"),[X,Y]=n.useState("No Sub Category"),Z=s=>{s.fet_image=[...F],s.product_image=M,s.brand_name=J,s.category_name=O,s.subcategory_name=X,G.mutate({data:s,token:d.jwt},{onSuccess:r=>{c.push(e.jsx(x,{type:"success",children:"Product updated successfully"})),u(null),g(null),L(null)},onError:r=>{c.push(e.jsx(x,{type:"error",children:"Product update failed !"}))}}),$()};return se(),e.jsx(e.Fragment,{children:e.jsx(re,{justifyContent:"center",alignItems:"center",direction:"column",className:"mt-28 2xl:mt-5 ",style:{height:"100vh"},children:e.jsx(ie,{bordered:!0,className:"shadow-sm w-[48.5rem]",style:{background:"#fff"},header:e.jsx("h3",{className:"font-bold bg-indigo-700 p-8 text-2xl text-white rounded-lg",children:"Upadte Product Information"}),children:e.jsx("form",{onSubmit:Q(Z),children:e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center mb-5 ",children:e.jsx(P,{fileListVisible:!1,listType:"picture",action:`${U.endpoints.host}/upload`,onUpload:s=>{i(!0),q(s.blobFile,r=>{u(o=>({...o,product_image:r}))})},onSuccess:(s,r)=>{i(!1),g(s.fileUrl)},onError:()=>{u(null),i(!1),c.push(e.jsx(x,{type:"error",children:"Upload failed"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[S&&e.jsx(B,{backdrop:!0,center:!0}),p?e.jsx("img",{src:p.product_image,width:"100%",height:"150%",alt:"product_picture"}):e.jsx("img",{src:a==null?void 0:a.product_image,alt:"product_picture"})]})})}),e.jsx("div",{className:"mt-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Feature Image"}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"border-2",children:e.jsx(P,{height:"200px",fileListVisible:!1,listType:"picture",action:`${U.endpoints.host}/upload`,onUpload:s=>{i(!0),q(s.blobFile,r=>{u(o=>({...o,product_image:r}))})},onSuccess:(s,r)=>{i(!1),g(s.fileUrl)},onError:()=>{u(null),i(!1),c.push(e.jsx(x,{type:"error",children:"Upload failed"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[S&&e.jsx(B,{backdrop:!0,center:!0}),p?e.jsx("img",{src:p.product_image,width:"100%",height:"150%",alt:"product_picture"}):e.jsx("img",{src:a==null?void 0:a.product_image,alt:"product_picture"})]})})})})]})}),e.jsxs("div",{className:"flex gap-5 mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Product Name"}),e.jsx(l,{required:!0,className:"w-[14.5rem]",...t("name")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Company"}),e.jsx(N,{name:"brand_id",...t("brand_id"),control:f,render:({field:s})=>e.jsx(_,{searchable:!0,...s,size:"md",data:A,className:"w-[14.5rem]",onChange:(r,o)=>{s.onChange(r),k(r),K(o.target.innerHTML)},onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Category"}),e.jsx(N,{name:"category_id",...t("category_id"),control:f,render:({field:s})=>e.jsx(_,{searchable:!0,...s,size:"md",data:V,className:"w-[14.5rem]",onChange:(r,o)=>{s.onChange(r),W(o.target.innerHTML),T(r)},onBlur:()=>s.onBlur()})})]})]}),e.jsxs("div",{className:"flex gap-5 mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Sub Category"}),e.jsx(N,{name:"sub_category_id",...t("subcategory_id"),control:f,render:({field:s})=>e.jsx(_,{searchable:!0,...s,size:"md",data:H,className:"w-[14.5rem]",onChange:(r,o)=>{Y(o.target.innerHTML),s.onChange(r)},onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Price"}),e.jsx(l,{className:"w-[14.5rem]",required:!0,...t("price")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Minimum Purchase"}),e.jsx(l,{className:"w-[14.5rem]",required:!0,...t("min_purchease")})]})]}),e.jsxs("div",{className:"flex gap-5  mt-3 ",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Maximum Purchase"}),e.jsx(l,{className:"w-[14.5rem]",required:!0,...t("max_purchease")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Base Price"}),e.jsx(l,{className:"w-[14.5rem]",required:!0,...t("base_price")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Discount"}),e.jsx(l,{className:"w-[14.5rem]",required:!0,...t("discount")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold mt-3",children:"Description"}),e.jsx(l,{as:"textarea",required:!0,...t("des"),rows:3,placeholder:""})]}),e.jsxs("div",{className:"mt-10 flex gap-2",children:[e.jsx(I,{appearance:"ghost",children:"Cancel"}),e.jsx(I,{type:"submit","aria-required":!0,appearance:"primary",className:"bg-blue-600 font-bold",children:"Update Product"})]})]})})})})})}export{qe as default};
