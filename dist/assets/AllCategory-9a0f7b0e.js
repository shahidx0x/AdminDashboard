import{r as n,u as me,b as je,j as e,M as m,B as A,R as ge,A as pe}from"./index-45bd0b18.js";import{I as fe,_ as Ce}from"./index-413f5daf.js";import{u as R}from"./find-c3818947.js";import{u as ye}from"./useQuery-ea9946a5.js";import{g as B,d as be}from"./CategoryService-d66eff77.js";import{u as ke}from"./useToaster-8c146127.js";import{T as ve,D as a,S as Ne,a as T}from"./settings-bb2c4f1c.js";import{T as h}from"./Toggle-acffba5a.js";import{M as E}from"./toaster-3317b793.js";import"./AngleDown-9c7cb1f2.js";import"./api.config-65890cae.js";import"./propTypes-8a62bd57.js";import"./isArrayLikeObject-31c550f5.js";import"./merge-75c90e47.js";import"./createLucideIcon-23fda54c.js";import"./statusIcons-c1debc2b.js";function Qe(){var _,M,O;n.useState(!1);const[d,K]=n.useState(!0),[j,W]=n.useState(!0),[P,we]=n.useState(!1),[g,y]=n.useState(1),[b,F]=n.useState(!0),[p,V]=n.useState(!0),[$,Se]=n.useState(!1),[k,q]=n.useState(!0),f=me(t=>t.user.user),[G,Q]=n.useState(""),[z,v]=n.useState(!1);n.useState(!1);const N=ke(),w=je(),{Column:J,HeaderCell:S,Cell:o}=T,U=t=>e.jsx(o,{...t,style:{padding:4}}),X=t=>e.jsx(S,{...t,style:{padding:4},children:e.jsx("div",{className:"flex justify-center font-bold",children:t.children})}),{data:r,status:Y,refetch:c}=ye(["category",g,f.jwt],B,{cacheTime:0}),[Z,H]=n.useState(!1),[D,ee]=n.useState(null),te=()=>{H(!0)},se=R(be),ne=()=>{se.mutate({deleteId:D,token:f.jwt},{onSuccess:t=>{N.push(e.jsx(E,{type:"success",children:"Category deleted successfully"})),c()},onError:t=>{console.log(t.response),N.push(e.jsx(E,{type:"error",children:"Category delete failed !"}))}}),c()},L=()=>H(!1),u=({content:t,...s})=>e.jsx(o,{...s,children:e.jsx("p",{className:"flex justify-center items-center",children:t})}),C=[{key:"image",label:"Category Image",cellRenderer:({rowData:t,...s})=>e.jsx(o,{...s,children:e.jsx("div",{className:"flex justify-center -mt-2",children:e.jsx(pe,{src:(t==null?void 0:t.image)||"https://avatars.githubusercontent.com/u/12592949",alt:"P"})})}),width:100},{key:"brand_id",label:"Brand Id",cellRenderer:t=>{var s;return e.jsx(u,{...t,content:(s=t.rowData)==null?void 0:s.brand_id})},width:200},{key:"brand_name",label:"Brand Name",cellRenderer:t=>{var s;return e.jsx(u,{...t,content:(s=t.rowData)==null?void 0:s.brand_name})},width:150},{key:"_id",label:"Category Id",cellRenderer:t=>{var s;return e.jsx(u,{...t,content:(s=t.rowData)==null?void 0:s._id})},width:200},{key:"category_label",label:"Category Name",cellRenderer:({rowData:t,...s})=>{const i=()=>{w(`/dashbord/subcategory/list/${t==null?void 0:t.category_label}/${t==null?void 0:t._id}`,{state:{rowData:t}})};return e.jsx(o,{...s,children:e.jsx("p",{onClick:i,className:"flex justify-center items-center text-blue-500 font-bold hover:underline hover:cursor-pointer",children:t==null?void 0:t.category_label})})},width:200},{key:"category_label",label:"Sub Category Count",cellRenderer:t=>{var s;return e.jsx(u,{...t,content:((s=t.rowData)==null?void 0:s.subCategories.length)||0,className:"font-bold"})},width:150},{key:"actions",label:"Actions",cellRenderer:({rowData:t,...s})=>{const i=()=>{te(),ee(t._id)},x=()=>{w("/dashbord/category/edit",{state:{myData:t}})};return e.jsx(o,{...s,children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{type:"button",className:"text-blue-500 border px-3 py-2 -mt-1 hover:text-white hover:bg-indigo-500 rounded-lg",onClick:x,children:"Edit"}),e.jsx("button",{type:"button",className:"text-red-500 border px-3 py-2 -mt-1 rounded-lg hover:text-white hover:bg-red-500",onClick:i,children:"Delete"})]})})},width:200}],l=R(B),re=t=>{const s=t.target.value;Q(s),s===""&&(c(),v(!1))},le=()=>{v(!0),Ce.promise(l.mutateAsync({queryKey:["user_search",g,f.jwt,G]}),{loading:"Searching...",success:e.jsx("b",{children:"Category found!"}),error:e.jsx("b",{children:"Category not found in the database!"})})},oe=z&&((_=l==null?void 0:l.data)!=null&&_.data[0])?[(M=l==null?void 0:l.data)==null?void 0:M.data[0]]:r==null?void 0:r.data,[I,ae]=n.useState(C.map(t=>t.key)),de=C.filter(t=>I.some(s=>s===t.key)),ce=d?U:o,ie=d?X:S,he=()=>{y(t=>{var s;return t<((s=r==null?void 0:r.meta)==null?void 0:s.total_page)?t+1:t}),c()},ue=()=>{y(t=>Math.max(t-1,1)),c()};return e.jsxs("div",{children:[e.jsx(fe,{}),e.jsxs(m,{open:Z,onClose:L,children:[e.jsx(m.Header,{className:"p-5",children:e.jsx(m.Title,{className:"font-bold font-mono",children:"All subcategory will be deleted . Are you sure ?"})}),e.jsxs(m.Footer,{children:[e.jsx(A,{onClick:ne,className:"bg-blue-500 w-20",appearance:"primary",children:"Confirm"}),e.jsx(A,{className:" bg-red-500 text-white",onClick:L,children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsx("hr",{}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-3 2xl:justify-between",children:[e.jsxs("div",{className:"",children:[e.jsx(ve,{className:"h-12",data:C,labelKey:"label",valueKey:"key",value:I,onChange:ae,cleanable:!1}),e.jsxs(a,{className:"",icon:e.jsx(Ne,{}),children:[e.jsx(a.Item,{children:e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{children:"Compact："}),e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:d,onChange:K})]})}),e.jsx(a.Item,{children:e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{children:"Bordered："}),e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:j,onChange:W})]})}),e.jsx(a.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Show Header：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:b,onChange:F})]})}),e.jsx(a.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Hover：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:k,onChange:q})]})}),e.jsx(a.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Auto Height：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:p,onChange:V})]})})]})]}),e.jsx("div",{children:e.jsx("div",{className:" ",children:e.jsx("div",{className:"flex space-x-4 rounded-md",children:e.jsxs("div",{className:"flex rounded-md overflow-hidden h-12 w-full",children:[e.jsx("input",{onChange:t=>re(t),type:"text",className:"w-[20rem] border-2 p-3 text-lg  rounded-md rounded-r-none"}),e.jsx("button",{onClick:le,className:"bg-indigo-600 text-white px-6 text-lg font-semibold py-2 rounded-r-md",children:"Search"})]})})})})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-5",style:{height:p?"auto":400},children:[e.jsx(T,{loading:Y==="loading",height:300,hover:k,fillHeight:$,showHeader:b,autoHeight:p,data:P?[]:oe,bordered:j,cellBordered:j,headerHeight:d?40:30,rowHeight:d?56:30,children:de.map(t=>{const{key:s,label:i,cellRenderer:x,...xe}=t;return n.createElement(J,{...xe,key:s},e.jsx(ie,{children:i}),x?ge.createElement(x,{dataKey:s}):e.jsx(ce,{dataKey:s}))})}),e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex items-center justify-center py-10 lg:px-0 sm:px-6 px-4",children:e.jsxs("div",{className:"lg:w-3/5 w-full  flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4L4.49984 7.33333",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4.00002L4.49984 0.666687",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("p",{onClick:ue,className:"text-sm ml-3 font-medium leading-none ",children:"Previous"})]}),e.jsx("div",{className:"sm:flex hidden",children:e.jsxs("p",{className:"text-sm font-bold leading-none cursor-pointer text-gray-600 hover:text-indigo-700 border-t border-transparent hover:border-indigo-400 pt-3 mr-4 px-2",children:["pages : ",g,"/",(O=r==null?void 0:r.meta)==null?void 0:O.total_page]})}),e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsx("p",{onClick:he,className:"text-sm font-medium leading-none mr-3",children:"Next"}),e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 7.33333L12.8333 4",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 0.666687L12.8333 4.00002",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})})})]})]})]})}export{Qe as default};
