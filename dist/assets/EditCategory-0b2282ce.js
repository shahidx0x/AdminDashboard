import{u as R,a as V,r as l,b as M,c as A,d as P,e as H,f as z,j as e,S as Q,B as c,L as N,P as $,U as q,g as G,M as u,h as J,C as K,i as O,I as x,k as y}from"./index-adc71eaa.js";import{g as W}from"./BrandServices-d6ce987e.js";import{u as X}from"./CategoryService-5cab159e.js";function Y(o,n){const t=new FileReader;t.onloadend=()=>{n(t.result)},t.readAsDataURL(o)}function te(){var j,_;const o=R(a=>a.user.user),n=V(),[t,p]=l.useState(!1),[m,h]=l.useState(null),[g,S]=l.useState({fileUrl:""}),s=(j=M().state)==null?void 0:j.myData;console.log(s.brand_id);const{register:d,control:v,handleSubmit:B,reset:I,formState:{errors:D}}=A({defaultValues:{brand_id:s.brand_id}}),w=P(X),[C,U]=l.useState(s.brand_id),[L,k]=l.useState(s.brand_name),E=a=>{g.fileUrl!==""?a.image=g.fileUrl||s.image:a.image=s.image,a.brand_id=C||s.brand_id,a.brand_name=L||s.brand_name,a.id=s==null?void 0:s._id;let r=s==null?void 0:s._id;w.mutate({data:a,token:o.jwt,id:r},{onSuccess:i=>{n.push(e.jsx(u,{type:"success",children:"Category updated successfully"})),f(-1)},onError:i=>{console.log(i),n.push(e.jsx(u,{type:"error",children:"Category update failed ! Try Again."}))}}),I()},{data:b,status:ee}=H(["brandsIdName",o.jwt],W),F=[...((_=b==null?void 0:b.data)==null?void 0:_.map(a=>({label:a==null?void 0:a.name,value:a.id})))||["loading"]].map(a=>({label:a==null?void 0:a.label,value:a==null?void 0:a.value})),f=z();function T(){f("/dashbord/category/all")}return e.jsx(e.Fragment,{children:e.jsxs(Q,{justifyContent:"center",alignItems:"center",direction:"column",className:"-mt-10",style:{height:"100vh"},children:[e.jsxs(c,{className:"text-xl font-mono ",children:[e.jsx(c.Item,{as:N,to:"/dashbord",children:"Home"}),e.jsx(c.Item,{as:N,to:"/dashbord/category/all",children:"brand-list"}),e.jsx(c.Item,{active:!0,className:"text-blue-400",children:"brand-update"})]}),e.jsx($,{bordered:!0,className:"shadow-md w-[40rem] border-gray-400",header:e.jsx("h3",{className:"font-bold bg-indigo-500 text-white p-3 rounded-md text-2xl ",children:"Edit Brand Information"}),children:e.jsxs("form",{onSubmit:B(E),children:[e.jsx("div",{className:"flex justify-center items-center mb-8",children:e.jsx(q,{fileListVisible:!1,listType:"picture",action:`${G.endpoints.host}/upload`,onUpload:a=>{p(!0),Y(a.blobFile,r=>{h(r)})},onSuccess:(a,r)=>{p(!1),n.push(e.jsx(u,{type:"success"})),S(a)},onError:()=>{h(null),p(!1),n.push(e.jsx(u,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[t&&e.jsx(J,{backdrop:!0,center:!0}),m?e.jsx("img",{src:m,width:"100%",height:"150%"}):e.jsx("img",{src:s==null?void 0:s.image,alt:"Brand Logo"})]})})}),e.jsx("div",{className:"flex gap-5 justify-center",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Company"}),e.jsx(K,{name:"brand_id",...d("brand_id"),control:v,render:({field:a})=>e.jsx(O,{placeholder:s==null?void 0:s.brand_name,searchable:!0,...a,size:"md",data:F,className:"w-96",onChange:(r,i)=>{a.onChange(r),k(i.target.innerHTML),U(r)},onBlur:()=>a.onBlur()})})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Brand Name"}),e.jsx(x,{...d("category_label"),defaultValue:s==null?void 0:s.category_label,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Brand Type"}),e.jsx(x,{...d("category_type"),defaultValue:s==null?void 0:s.category_type,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Brand Information"}),e.jsx(x,{defaultValue:s==null?void 0:s.category_description,...d("category_description"),as:"textarea",rows:3})]}),e.jsxs("div",{className:" flex gap-2 mb-9",children:[e.jsx(y,{appearance:"ghost",onClick:()=>T(),children:"Cancel"}),e.jsx(y,{type:"submit",appearance:"primary",className:"bg-blue-600",children:"Update Brand"})]})]})})]})})]})})}export{te as default};
