import{r as t,u as ye,a as be,f as Ce,a3 as ke,b as we,e as ve,d as E,j as e,k as Ne,l as x,i as C,T as Se,D as l,m as Le,n as h,o as K,I as He,p as Ie,q as T,R as Oe,M as W,_ as _e,A as Ae}from"./index-2cf63a4d.js";import{a as P,D as De}from"./SubCategoryServices-d050e0b5.js";function Te(){var M,B,R;t.useState(!1);const[o,F]=t.useState(!0),[j,G]=t.useState(!0),[q,Me]=t.useState(!1),[m,k]=t.useState(1),[w,V]=t.useState(!0),[g,$]=t.useState(!0),[Q,Be]=t.useState(!1),[v,U]=t.useState(!0),p=ye(s=>s.user.user),[Y,z]=t.useState(""),[J,N]=t.useState(!1);t.useState(null),t.useState(!1);const S=be(),L=Ce(),{Column:X,HeaderCell:H,Cell:c}=T,f=ke(),Z=f.category_id,I=we(),ee=s=>e.jsx(c,{...s,style:{padding:4}}),se=s=>e.jsx(H,{...s,style:{padding:4},children:e.jsx("div",{className:"flex justify-center font-bold",children:s.children})}),te=({rowData:s,dataKey:n,...i})=>e.jsx(c,{...i,children:e.jsx("div",{className:"flex justify-center -mt-2",children:e.jsx(Ae,{className:"",src:(s==null?void 0:s.image)||"https://avatars.githubusercontent.com/u/12592949",alt:"P"})})}),{data:a,status:ne,refetch:d}=ve(["sub-category",m,p.jwt,f.category_id],P),[ae,y]=t.useState(!1),[O,re]=t.useState(null),le=()=>{y(!0)},oe=E(De),ce=()=>{oe.mutate({deleteId:O,token:p.jwt,category_id:f.category_id,subcategory_id:O},{onSuccess:s=>{S.push(e.jsx(W,{type:"success",children:"Sub category deleted successfully"})),d()},onError:s=>{console.log(s.response),S.push(e.jsx(W,{type:"error",children:"Sub category delete failed !"}))}}),y(!1),d()},_=()=>y(!1),A=({content:s,...n})=>e.jsx(c,{...n,children:e.jsx("p",{className:"flex justify-center items-center",children:s})}),b=[{key:"image",label:"Sub Category Image",cellRenderer:te,width:150},{key:"subcategory_name",label:"Sub Category Name",cellRenderer:s=>e.jsx(A,{...s,content:s.rowData.subcategory_name}),width:200},{key:"description",label:"Description",cellRenderer:s=>{var n;return e.jsx(A,{...s,content:(n=s.rowData)==null?void 0:n.description})},width:200},{key:"actions",label:"Actions",cellRenderer:({rowData:s,...n})=>{const i=()=>{le(),re(s._id)},u=()=>{L("/dashbord/subcategory/edit",{state:{myData:s}})};return e.jsx(c,{...n,children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{type:"button",className:"text-blue-500 border px-3 py-2 -mt-1 hover:text-white hover:bg-indigo-500 rounded-lg",onClick:u,children:"Edit"}),e.jsx("button",{type:"button",className:"text-red-500 border px-3 py-2 -mt-1 rounded-lg hover:text-white hover:bg-red-500",onClick:i,children:"Delete"})]})})},width:200}],r=E(P),de=s=>{console.log(s),z(s),s===""&&(d(),N(!1))},ie=()=>{N(!0),_e.promise(r.mutateAsync({queryKey:["sucat_search",m,p.jwt,Z,Y]}),{loading:"Searching...",success:e.jsx("b",{children:"sub category found!"}),error:e.jsx("b",{children:"sub not found in the database!"})})},he=J&&((M=r==null?void 0:r.data)!=null&&M.data[0])?[(B=r==null?void 0:r.data)==null?void 0:B.data[0]]:a==null?void 0:a.data,[D,ue]=t.useState(b.map(s=>s.key)),xe=b.filter(s=>D.some(n=>n===s.key)),je=o?ee:c,me=o?se:H,ge=()=>{k(s=>{var n;return s<((n=a==null?void 0:a.meta)==null?void 0:n.total_page)?s+1:s}),d()},pe=()=>{k(s=>Math.max(s-1,1)),d()};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx(Ne,{}),e.jsxs(x,{open:ae,onClose:_,children:[e.jsxs(x.Header,{className:"p-5",children:[e.jsx(x.Title,{className:"font-bold font-mono",children:"Are you sure ?"}),e.jsx("p",{children:"All Subcategory and releted product will be deleted"})]}),e.jsxs(x.Footer,{children:[e.jsx(C,{onClick:ce,className:"bg-blue-500 w-20",appearance:"primary",children:"Confirm"}),e.jsx(C,{className:" bg-red-500 text-white",onClick:_,children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsx("hr",{}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex flex-col gap-3 2xl:flex-row 2xl:justify-between",children:[e.jsxs("div",{className:"",children:[e.jsx(Se,{className:"h-12",data:b,labelKey:"label",valueKey:"key",value:D,onChange:ue,cleanable:!1}),e.jsxs(l,{className:"",icon:e.jsx(Le,{}),children:[e.jsx(l.Item,{children:e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{children:"Compact："}),e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:o,onChange:F})]})}),e.jsx(l.Item,{children:e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{children:"Bordered："}),e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:j,onChange:G})]})}),e.jsx(l.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Show Header：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:w,onChange:V})]})}),e.jsx(l.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Hover：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:v,onChange:U})]})}),e.jsx(l.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Auto Height：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:g,onChange:$})]})})]})]}),e.jsx("div",{children:e.jsxs("div",{className:" ",children:[e.jsxs(K,{children:[e.jsx(He,{placeholder:"Search by Subcategory",onChange:s=>de(s)}),e.jsx(K.Button,{onClick:()=>ie(),tabIndex:-1,children:e.jsx(Ie,{className:"text-indigo-500 font-bold"})})]}),e.jsx(C,{onClick:()=>{L(`/dashbord/subcategory/${I.state.rowData.brand_id}/${I.state.rowData._id}/add`)},className:"bg-indigo-600 w-60 text-white font-bold mt-3",children:"ADD SUB CATEGORY"})]})})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-5",style:{height:g?"auto":400},children:[e.jsx(T,{loading:ne==="loading",height:300,hover:v,fillHeight:Q,showHeader:w,autoHeight:g,data:q?[]:he,bordered:j,cellBordered:j,headerHeight:o?40:30,rowHeight:o?56:30,children:xe.map(s=>{const{key:n,label:i,cellRenderer:u,...fe}=s;return t.createElement(X,{...fe,key:n},e.jsx(me,{children:i}),u?Oe.createElement(u,{dataKey:n}):e.jsx(je,{dataKey:n}))})}),e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex items-center justify-center py-10 lg:px-0 sm:px-6 px-4",children:e.jsxs("div",{className:"lg:w-3/5 w-full  flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4L4.49984 7.33333",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4.00002L4.49984 0.666687",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("p",{onClick:pe,className:"text-sm ml-3 font-medium leading-none ",children:"Previous"})]}),e.jsx("div",{className:"sm:flex hidden",children:e.jsxs("p",{className:"text-sm font-bold leading-none cursor-pointer text-gray-600 hover:text-indigo-700 border-t border-transparent hover:border-indigo-400 pt-3 mr-4 px-2",children:["pages : ",m,"/",(R=a==null?void 0:a.meta)==null?void 0:R.total_page]})}),e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsx("p",{onClick:ge,className:"text-sm font-medium leading-none mr-3",children:"Next"}),e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 7.33333L12.8333 4",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 0.666687L12.8333 4.00002",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})})})]})]})]})})}export{Te as default};
