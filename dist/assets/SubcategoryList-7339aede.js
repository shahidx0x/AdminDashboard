import{r as n,u as fe,b as be,t as ye,a as Ce,j as e,M as x,B as k,R as ke,A as we}from"./index-9fd1c950.js";import{I as ve,_ as Ne}from"./index-68e9a1da.js";import{u as E}from"./find-0a08b125.js";import{u as Se}from"./useQuery-a9ae40a9.js";import{a as K,D as Le}from"./SubCategoryServices-d6aa268c.js";import{u as He}from"./useToaster-cb945763.js";import{T as _e,D as o,S as Ie,a as T}from"./settings-d9a805d6.js";import{T as h}from"./Toggle-15aa0d1e.js";import{M as W}from"./toaster-1871e3f9.js";import"./AngleDown-87ba3808.js";import"./api.config-65890cae.js";import"./propTypes-612c656a.js";import"./isArrayLikeObject-bbfbf98f.js";import"./merge-1a1c034c.js";import"./createLucideIcon-de2e742d.js";import"./statusIcons-23546098.js";function ze(){var A,R,B;n.useState(!1);const[l,P]=n.useState(!0),[m,F]=n.useState(!0),[G,De]=n.useState(!1),[j,w]=n.useState(1),[v,V]=n.useState(!0),[g,$]=n.useState(!0),[q,Oe]=n.useState(!1),[N,Q]=n.useState(!0),p=fe(t=>t.user.user),[U,Y]=n.useState(""),[z,S]=n.useState(!1);n.useState(null),n.useState(!1);const L=He(),H=be(),{Column:J,HeaderCell:_,Cell:d}=T,f=ye(),X=f.category_id,I=Ce(),Z=t=>e.jsx(d,{...t,style:{padding:4}}),ee=t=>e.jsx(_,{...t,style:{padding:4},children:e.jsx("div",{className:"flex justify-center font-bold",children:t.children})}),te=({rowData:t,dataKey:s,...i})=>e.jsx(d,{...i,children:e.jsx("div",{className:"flex justify-center -mt-2",children:e.jsx(we,{className:"",src:(t==null?void 0:t.image)||"https://avatars.githubusercontent.com/u/12592949",alt:"P"})})}),{data:r,status:se,refetch:c}=Se(["sub-category",j,p.jwt,f.category_id],K),[ne,b]=n.useState(!1),[D,re]=n.useState(null),ae=()=>{b(!0)},oe=E(Le),le=()=>{oe.mutate({deleteId:D,token:p.jwt,category_id:f.category_id,subcategory_id:D},{onSuccess:t=>{L.push(e.jsx(W,{type:"success",children:"Sub category deleted successfully"})),c()},onError:t=>{console.log(t.response),L.push(e.jsx(W,{type:"error",children:"Sub category delete failed !"}))}}),b(!1),c()},O=()=>b(!1),y=({content:t,...s})=>e.jsx(d,{...s,children:e.jsx("p",{className:"flex justify-center items-center",children:t})}),C=[{key:"image",label:"Sub Category Image",cellRenderer:te,width:150},{key:"brand_id",label:"Subcategory Id",cellRenderer:t=>{var s;return e.jsx(y,{...t,content:(s=t.rowData)==null?void 0:s._id})},width:200},{key:"subcategory_name",label:"Sub Category Name",cellRenderer:t=>e.jsx(y,{...t,content:t.rowData.subcategory_name}),width:200},{key:"description",label:"Description",cellRenderer:t=>{var s;return e.jsx(y,{...t,content:(s=t.rowData)==null?void 0:s.description})},width:200},{key:"actions",label:"Actions",cellRenderer:({rowData:t,...s})=>{const i=()=>{ae(),re(t._id)},u=()=>{H("/dashbord/subcategory/edit",{state:{myData:t}})};return e.jsx(d,{...s,children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{type:"button",className:"text-blue-500 border px-3 py-2 -mt-1 hover:text-white hover:bg-indigo-500 rounded-lg",onClick:u,children:"Edit"}),e.jsx("button",{type:"button",className:"text-red-500 border px-3 py-2 -mt-1 rounded-lg hover:text-white hover:bg-red-500",onClick:i,children:"Delete"})]})})},width:200}],a=E(K),de=t=>{const s=t.target.value;Y(s),s===""&&(c(),S(!1))},ce=()=>{S(!0),Ne.promise(a.mutateAsync({queryKey:["sucat_search",j,p.jwt,X,U]}),{loading:"Searching...",success:e.jsx("b",{children:"sub category found!"}),error:e.jsx("b",{children:"sub not found in the database!"})})},ie=z&&((A=a==null?void 0:a.data)!=null&&A.data[0])?[(R=a==null?void 0:a.data)==null?void 0:R.data[0]]:r==null?void 0:r.data,[M,he]=n.useState(C.map(t=>t.key)),ue=C.filter(t=>M.some(s=>s===t.key)),xe=l?Z:d,me=l?ee:_,je=()=>{w(t=>{var s;return t<((s=r==null?void 0:r.meta)==null?void 0:s.total_page)?t+1:t}),c()},ge=()=>{w(t=>Math.max(t-1,1)),c()};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx(ve,{}),e.jsxs(x,{open:ne,onClose:O,children:[e.jsx(x.Header,{className:"p-5",children:e.jsx(x.Title,{className:"font-bold font-mono",children:"Subcategory will be deleted . Are you sure ?"})}),e.jsxs(x.Footer,{children:[e.jsx(k,{onClick:le,className:"bg-blue-500 w-20",appearance:"primary",children:"Confirm"}),e.jsx(k,{className:" bg-red-500 text-white",onClick:O,children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsx("hr",{}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex flex-col gap-3 2xl:flex-row 2xl:justify-between",children:[e.jsxs("div",{className:"",children:[e.jsx(_e,{className:"h-12",data:C,labelKey:"label",valueKey:"key",value:M,onChange:he,cleanable:!1}),e.jsxs(o,{className:"",icon:e.jsx(Ie,{}),children:[e.jsx(o.Item,{children:e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{children:"Compact："}),e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:l,onChange:P})]})}),e.jsx(o.Item,{children:e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{children:"Bordered："}),e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:m,onChange:F})]})}),e.jsx(o.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Show Header：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:v,onChange:V})]})}),e.jsx(o.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Hover：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:N,onChange:Q})]})}),e.jsx(o.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Auto Height：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:g,onChange:$})]})})]})]}),e.jsx("div",{children:e.jsx("div",{className:" ",children:e.jsx("div",{className:"flex space-x-4  rounded-md",children:e.jsxs("div",{className:"flex rounded-md overflow-hidden h-12 w-full",children:[e.jsx("input",{onChange:t=>de(t),type:"text",className:"w-[20rem] border-2 text-md  rounded-md rounded-r-none"}),e.jsx("button",{onClick:ce,className:"bg-indigo-600 text-white px-6 text-lg font-semibold py-2 rounded-r-md",children:"Search"})]})})})}),e.jsx(k,{onClick:()=>{H(`/dashbord/subcategory/${I.state.rowData.brand_id}/${I.state.rowData._id}/add`)},className:"bg-indigo-600 w-60 text-white font-bold",children:"ADD SUB CATEGORY"})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-5",style:{height:g?"auto":400},children:[e.jsx(T,{loading:se==="loading",height:300,hover:N,fillHeight:q,showHeader:v,autoHeight:g,data:G?[]:ie,bordered:m,cellBordered:m,headerHeight:l?40:30,rowHeight:l?56:30,children:ue.map(t=>{const{key:s,label:i,cellRenderer:u,...pe}=t;return n.createElement(J,{...pe,key:s},e.jsx(me,{children:i}),u?ke.createElement(u,{dataKey:s}):e.jsx(xe,{dataKey:s}))})}),e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex items-center justify-center py-10 lg:px-0 sm:px-6 px-4",children:e.jsxs("div",{className:"lg:w-3/5 w-full  flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4L4.49984 7.33333",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4.00002L4.49984 0.666687",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("p",{onClick:ge,className:"text-sm ml-3 font-medium leading-none ",children:"Previous"})]}),e.jsx("div",{className:"sm:flex hidden",children:e.jsxs("p",{className:"text-sm font-bold leading-none cursor-pointer text-gray-600 hover:text-indigo-700 border-t border-transparent hover:border-indigo-400 pt-3 mr-4 px-2",children:["pages : ",j,"/",(B=r==null?void 0:r.meta)==null?void 0:B.total_page]})}),e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsx("p",{onClick:je,className:"text-sm font-medium leading-none mr-3",children:"Next"}),e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 7.33333L12.8333 4",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 0.666687L12.8333 4.00002",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})})})]})]})]})})}export{ze as default};
