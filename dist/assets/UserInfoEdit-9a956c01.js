import{R as j,t as J,v as K,w as F,x as i,u as X,a as Y,r as b,b as D,c as ee,e as se,d as ae,f as le,j as e,S as te,P as ne,B as A,L as V,U as re,g as $,M as N,h as oe,I as m,C as k,i as R,y as ce,s as ie}from"./index-52666447.js";import{g as de}from"./BrandServices-bd89b8f2.js";import{S as z}from"./SelectPicker-4f5234de.js";var B=j.forwardRef(function(l,t){var d=l.as,x=d===void 0?"div":d,r=l.content,g=l.color,n=l.className,v=l.classPrefix,y=v===void 0?"badge":v,s=l.children,p=l.maxCount,w=p===void 0?99:p,C=J(l,["as","content","color","className","classPrefix","children","maxCount"]),h=K(y),o=h.withClassPrefix,S=h.prefix,P=h.merge,U=r==null,_=P(n,o(g,{independent:!s,wrapper:s,dot:U}));if(r===!1)return j.cloneElement(s,{ref:t});var f=typeof r=="number"&&r>w?w+"+":r;return s?j.createElement(x,F({},C,{ref:t,className:_}),s,j.createElement("div",{className:S("content")},f)):j.createElement(x,F({},C,{ref:t,className:_}),f)});B.displayName="Badge";B.propTypes={className:i.string,classPrefix:i.string,children:i.node,as:i.elementType,content:i.oneOfType([i.node,i.bool]),maxCount:i.number,color:i.oneOf(["red","orange","yellow","green","cyan","blue","violet"])};const ue=B;function me(l,t){const d=new FileReader;d.onloadend=()=>{t(d.result)},d.readAsDataURL(l)}function Ne(){var E,L;const l=X(a=>a.user.user),t=Y(),[d,x]=b.useState(!1),[r,g]=b.useState(null),[n,v]=b.useState({fileUrl:""}),s=(E=D().state)==null?void 0:E.myData,[p,w]=b.useState(void 0),[C,h]=b.useState(void 0),{register:o,control:S,watch:P,handleSubmit:U,formState:{errors:_}}=ee({defaultValues:{isAccountActive:s==null?void 0:s.isAccountActive}});P("isAccountActive");const{data:f,status:xe}=se(["brandsIdName",l.jwt],de),M=[...((L=f==null?void 0:f.data)==null?void 0:L.map(a=>({label:a==null?void 0:a.name,value:a.id,slug:a.slug})))||["loading"]].map(a=>({label:a==null?void 0:a.label,value:(a==null?void 0:a.value)+","+a.slug})),H=ae(ie),O=a=>{n.fileUrl!==""?a.profilePicture=n.fileUrl:a.profilePicture="",a.company=C,p&&(a.company_slug=p.split(",")[1],a.companyAssignedBy="Admin"),a.company===void 0&&(a.company=s.company);const c=s.ac_status,u=a.ac_status,T=c!==u&&(u===1||u===-1);u===1&&(a.isAccountActive=!0),console.log(T),H.mutate({data:a,token:l.jwt},{onSuccess:Z=>{if(t.push(e.jsx(N,{type:"success",children:"Updated successfully"})),T){const q=u===1?"accept":"reject";ce.post(`${$.endpoints.host}/notify/user/${a.email||s.email}/${q}`).then(G=>{}).catch(G=>{t.push(e.jsx(N,{type:"error",children:"Notification failed!"}))})}I(-1)},onError:Z=>{t.push(e.jsx(N,{type:"error",children:"Update failed!"}))}})},Q=[{label:"Active",value:1},{label:"Reject",value:-1}].map(a=>({label:a.label,value:a.value})),I=le();function W(){I("/dashbord/user-table")}return e.jsx(e.Fragment,{children:e.jsx(te,{justifyContent:"center",alignItems:"center",direction:"column",className:"mt-14 2xl:-ml-28 px-8 w-full",children:e.jsx(ne,{bordered:!0,className:"shadow-sm -mt-10 border-l-8 border-l-indigo-400",style:{background:"#fff"},header:e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"text-sm font-mono",children:[e.jsx(A.Item,{as:V,to:"/dashbord",children:"Home"}),e.jsx(A.Item,{as:V,to:"/dashbord/user-table",children:"user-list"}),e.jsx(A.Item,{active:!0,className:"text-blue-400",children:"user-information-edit"})]}),e.jsx("h3",{className:"font-bold p-5 text-2xl bg-indigo-500 rounded-lg text-white",children:"Update User Information"})]}),children:e.jsxs("form",{onSubmit:U(O),children:[e.jsx("div",{className:"flex  flex-col justify-center items-center mb-10",children:e.jsx(ue,{color:(n==null?void 0:n.fileUrl)!==""?"green":"red",content:(n==null?void 0:n.fileUrl)!==""&&"uploaded",children:e.jsx(re,{fileListVisible:!1,listType:"picture",action:`${$.endpoints.host}/upload`,onUpload:a=>{x(!0),me(a.blobFile,c=>{g(c)})},onSuccess:(a,c)=>{x(!1),t.push(e.jsx(N,{type:"success"})),v(a)},onError:()=>{g(null),x(!1),t.push(e.jsx(N,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[d&&e.jsx(oe,{backdrop:!0,center:!0}),r?e.jsx("img",{src:r,width:"100%",height:"150%"}):e.jsx("img",{src:s==null?void 0:s.profilePicture,alt:"Profile Picture"})]})})})}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex  p-5",children:e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"First Name"}),e.jsx(m,{...o("firstName"),defaultValue:s==null?void 0:s.firstName,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Last Name"}),e.jsx(m,{...o("lastName"),defaultValue:s==null?void 0:s.lastName,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Email"}),e.jsx(m,{value:s==null?void 0:s.email,...o("email"),className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Phone Number"}),e.jsx(m,{...o("phoneNumber"),defaultValue:(s==null?void 0:s.phoneNumber)||"Not Available",className:"w-56"})]})]})}),e.jsxs("div",{className:"flex  p-5 flex-col 2xl:flex-row gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Cart Number"}),e.jsx(m,{...o("cartNumber"),defaultValue:s==null?void 0:s.cartNumber,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Zip Code"}),e.jsx(m,{...o("zipCode"),defaultValue:s==null?void 0:s.zipCode,className:"w-56"})]}),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"font-bold",children:"Company"}),e.jsx(k,{name:"company",control:S,render:({field:a})=>e.jsx(z,{placeholder:s==null?void 0:s.company,searchable:!0,...a,size:"md",data:M,className:"w-56",onChange:(c,u)=>{a.onChange(c),h(u.target.innerHTML),w(c)},onBlur:()=>a.onBlur()})})]}),e.jsx("div",{className:"flex gap-5",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Location"}),e.jsx(m,{...o("location"),defaultValue:s==null?void 0:s.location,className:"w-56"})]})})]}),e.jsxs("div",{className:"mt-10 flex gap-5",children:[e.jsx("p",{className:"font-bold",children:"Account Activation Status :"}),e.jsx(k,{name:"ac_status",control:S,render:({field:a})=>e.jsx(z,{searchable:!1,placeholder:(s==null?void 0:s.ac_status)===0?"Pending":(s==null?void 0:s.ac_status)===1?"Active":"Rejected",...a,size:"md",data:Q,className:"w-56 -mt-2",onChange:c=>a.onChange(c),onBlur:()=>a.onBlur()})})]}),e.jsxs("div",{className:"mt-5 flex gap-5",children:[e.jsx(R,{appearance:"ghost",onClick:()=>W(),children:"Cancel"}),e.jsx(R,{type:"submit",appearance:"primary",className:"bg-blue-600",children:"Update"})]})]})]})})})})}export{Ne as default};
