import{u as R,a as V,r as l,b as M,c as A,d as P,e as H,f as z,j as e,S as Q,B as c,L as y,P as $,U as q,g as G,M as u,h as J,C as K,I as x,i as _}from"./index-477ed411.js";import{g as O}from"./BrandServices-dada04ca.js";import{u as W}from"./CategoryService-74770ba9.js";import{S as X}from"./SelectPicker-88d14886.js";function Y(o,t){const n=new FileReader;n.onloadend=()=>{t(n.result)},n.readAsDataURL(o)}function le(){var j,N;const o=R(s=>s.user.user),t=V(),[n,p]=l.useState(!1),[b,h]=l.useState(null),[g,S]=l.useState({fileUrl:""}),a=(j=M().state)==null?void 0:j.myData,{register:d,control:v,handleSubmit:B,reset:I,formState:{errors:D}}=A({defaultValues:{brand_id:a.brand_id}}),w=P(W),[C,U]=l.useState(null),[L,k]=l.useState(a.brand_name),E=s=>{g.fileUrl!==""?s.image=g.fileUrl||a.image:s.image=a.image,s.brand_id=C,s.brand_name=L,s.id=a==null?void 0:a._id;let r=a==null?void 0:a._id;w.mutate({data:s,token:o.jwt,id:r},{onSuccess:i=>{t.push(e.jsx(u,{type:"success",children:"Category updated successfully"})),f(-1)},onError:i=>{console.log(i),t.push(e.jsx(u,{type:"error",children:"Category update failed ! Try Again."}))}}),I()},{data:m,status:ee}=H(["brandsIdName",o.jwt],O),F=[...((N=m==null?void 0:m.data)==null?void 0:N.map(s=>({label:s==null?void 0:s.name,value:s.id})))||["loading"]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),f=z();function T(){f("/dashbord/category/all")}return e.jsx(e.Fragment,{children:e.jsxs(Q,{justifyContent:"center",alignItems:"center",direction:"column",className:"-mt-10",style:{height:"100vh"},children:[e.jsxs(c,{className:"text-xl font-mono ",children:[e.jsx(c.Item,{as:y,to:"/dashbord",children:"Home"}),e.jsx(c.Item,{as:y,to:"/dashbord/category/all",children:"brand-list"}),e.jsx(c.Item,{active:!0,className:"text-blue-400",children:"brand-update"})]}),e.jsx($,{bordered:!0,className:"shadow-md w-[40rem] border-gray-400",header:e.jsx("h3",{className:"font-bold bg-indigo-500 text-white p-3 rounded-md text-2xl ",children:"Edit Brand Information"}),children:e.jsxs("form",{onSubmit:B(E),children:[e.jsx("div",{className:"flex justify-center items-center mb-8",children:e.jsx(q,{fileListVisible:!1,listType:"picture",action:`${G.endpoints.host}/upload`,onUpload:s=>{p(!0),Y(s.blobFile,r=>{h(r)})},onSuccess:(s,r)=>{p(!1),t.push(e.jsx(u,{type:"success"})),S(s)},onError:()=>{h(null),p(!1),t.push(e.jsx(u,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[n&&e.jsx(J,{backdrop:!0,center:!0}),b?e.jsx("img",{src:b,width:"100%",height:"150%"}):e.jsx("img",{src:a==null?void 0:a.image,alt:"Brand Logo"})]})})}),e.jsx("div",{className:"flex gap-5 justify-center",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Company"}),e.jsx(K,{name:"brand_id",...d("brand_id"),control:v,render:({field:s})=>e.jsx(X,{placeholder:a==null?void 0:a.brand_name,searchable:!0,...s,size:"md",data:F,className:"w-96",onChange:(r,i)=>{s.onChange(r),k(i.target.innerHTML),U(r)},onBlur:()=>s.onBlur()})})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Brand Name"}),e.jsx(x,{...d("category_label"),defaultValue:a==null?void 0:a.category_label,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Brand Type"}),e.jsx(x,{...d("category_type"),defaultValue:a==null?void 0:a.category_type,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Brand Information"}),e.jsx(x,{defaultValue:a==null?void 0:a.category_description,...d("category_description"),as:"textarea",rows:3})]}),e.jsxs("div",{className:" flex gap-2 mb-9",children:[e.jsx(_,{appearance:"ghost",onClick:()=>T(),children:"Cancel"}),e.jsx(_,{type:"submit",appearance:"primary",className:"bg-blue-600",children:"Update Brand"})]})]})})]})})]})})}export{le as default};
