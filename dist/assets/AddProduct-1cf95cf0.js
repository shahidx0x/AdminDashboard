import{R as f,t as ye,z as Ce,v as we,E as Se,r as t,K as Y,F as _e,I as ve,w as xe,G as Ie,H as me,J as be,i as Z,O as Pe,Q as Ee,x as n,o as Be,V as De,u as ke,a as Me,e as ce,c as Ue,d as Re,j as a,B as h,L as J,U as ge,g as he,M as de,h as Ae,C as ie,W as Le}from"./index-2cf63a4d.js";import{R as Ne,t as Fe}from"./toolbar.config-cb62bfe0.js";import{g as Ve}from"./BrandServices-01a21b8b.js";import{a as Te}from"./CategoryService-1e399a4a.js";import{g as Oe}from"./SubCategoryServices-d050e0b5.js";import{S as ue}from"./SelectPicker-845e072d.js";var $e=function(o){return/(^-?|^\+?|^\d?)\d*\.\d+$/.test(o+"")};function ze(l){return $e(l)?l.toString().split(".")[1].length:0}function je(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];var N=o.map(ze);return Math.max.apply(Math,N)}function He(l,o){return me(l)?!1:+l>=o}function We(l,o){return me(l)?!1:+l<=o}var pe=f.forwardRef(function(l,o){var c=l.as,N=c===void 0?Be:c,O=l.className,C=l.classPrefix,ee=C===void 0?"input-number":C,x=l.disabled,j=l.readOnly,w=l.plaintext,M=l.value,ae=l.defaultValue,U=l.size,$=l.prefix,R=l.postfix,z=l.step,u=z===void 0?1:z,S=l.buttonAppearance,_=S===void 0?"subtle":S,b=l.min,g=l.max,se=l.scrollable,A=se===void 0?!0:se,I=l.onChange,v=l.onWheel,le=ye(l,["as","className","classPrefix","disabled","readOnly","plaintext","value","defaultValue","size","prefix","postfix","step","buttonAppearance","min","max","scrollable","onChange","onWheel"]),P=b??-1/0,d=g??1/0,E=Ce(M,ae),m=E[0],H=E[1],W=we(ee),re=W.withClassPrefix,te=W.merge,L=W.prefix,ne=te(O,re()),K=Se(le),B=K[0],oe=K[1],F=t.useRef(),i=t.useCallback(function(s,r){s!==m&&(H(s),I==null||I(s,r))},[I,H,m]),p=t.useCallback(function(s){return Number.isNaN(s)?s="":(+s>d&&(s=d),+s<P&&(s=P)),s.toString()},[d,P]),D=t.useCallback(function(s){var r=+(m||0),T=je(r,u);i(p((r+u).toFixed(T)),s)},[p,i,u,m]),y=t.useCallback(function(s){var r=+(m||0),T=je(r,u);i(p((r-u).toFixed(T)),s)},[p,i,u,m]),fe=x||j||He(m,d),q=x||j||We(m,P),k=t.useCallback(function(s){switch(s.key){case Y.UP:s.preventDefault(),D(s);break;case Y.DOWN:s.preventDefault(),y(s);break;case Y.HOME:typeof b<"u"&&(s.preventDefault(),i(p(b),s));break;case Y.END:typeof g<"u"&&(s.preventDefault(),i(p(g),s));break}},[D,y,b,g,i,p]),V=t.useCallback(function(s){if(!A){s.preventDefault();return}if(!x&&!j&&s.target===document.activeElement){s.preventDefault();var r=s.wheelDelta||-s.deltaY||-(s==null?void 0:s.detail);r>0&&y(s),r<0&&D(s)}v==null||v(s)},[x,y,D,v,j,A]),G=t.useCallback(function(s,r){!/^-?(?:\d+)?(\.)?\d*$/.test(s)&&s!==""||i(s,r)},[i]),Q=t.useCallback(function(s){var r,T=Number.parseFloat((r=s.target)===null||r===void 0?void 0:r.value);i(p(T),s)},[p,i]);t.useEffect(function(){var s;return F.current&&(s=_e(F.current,"wheel",V,{passive:!1})),function(){var r;(r=s)===null||r===void 0||r.off()}},[V,A]);var e=f.createElement(ve,xe({},B,{type:"number",autoComplete:"off",step:u,inputRef:F,onChange:G,onBlur:Ie(Q,B==null?void 0:B.onBlur),value:me(m)?"":""+m,disabled:x,readOnly:j,plaintext:w,ref:w?o:void 0,onKeyDown:k}));return w?e:f.createElement(N,xe({},oe,{ref:o,className:ne,disabled:x,size:U}),$&&f.createElement(be,null,$),e,f.createElement("span",{className:L("btn-group-vertical")},f.createElement(Z,{tabIndex:-1,appearance:_,className:L("touchspin-up"),onClick:D,disabled:fe,"aria-label":"Increment"},f.createElement(Pe,null)),f.createElement(Z,{tabIndex:-1,appearance:_,className:L("touchspin-down"),onClick:y,disabled:q,"aria-label":"Decrement"},f.createElement(Ee,null))),R&&f.createElement(be,null,R))});pe.displayName="InputNumber";pe.propTypes={className:n.string,classPrefix:n.string,min:n.number,max:n.number,step:n.number,value:n.oneOfType([n.number,n.string]),defaultValue:n.oneOfType([n.number,n.string]),prefix:n.node,postfix:n.node,disabled:n.bool,readOnly:n.bool,plaintext:n.bool,scrollable:n.bool,size:n.oneOf(["lg","md","sm","xs"]),buttonAppearance:n.oneOf(["default","primary","link","subtle","ghost"]),onWheel:n.func,onChange:n.func};const X=pe,Ke=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function qe(l,o){const c=new FileReader;c.onloadend=()=>{o(c.result)},c.readAsDataURL(l)}function ea(){var V,G,Q;const l=ke(e=>e.user.user),o=Me(),[c,N]=t.useState(!1),[O,C]=t.useState({product_image:""}),[ee,x]=t.useState([]),[j,w]=t.useState(null),[M,ae]=t.useState("brand"),[U,$]=t.useState(""),[R,z]=t.useState(""),{data:u}=ce(["brandsIdName",l.jwt],Ve),{data:S}=ce(["categoryIdName","",l.jwt,M.split(",")[0],-1],Te),{data:_}=ce(["subCategoryIdName","",l.jwt,U.split(",")[0],-1],Oe),b=(V=S==null?void 0:S.data)==null?void 0:V.map(e=>({label:e==null?void 0:e.category_label,value:e._id,slug:e.category_slug})),g=(G=_==null?void 0:_.data)==null?void 0:G.map(e=>({label:e==null?void 0:e.subcategory_name,value:e._id+","+e.subcategory_slug})),A=[...((Q=u==null?void 0:u.data)==null?void 0:Q.map(e=>({label:e==null?void 0:e.name,value:e.id,slug:e.slug})))||["loading"]].map(e=>({label:e==null?void 0:e.label,value:(e==null?void 0:e.value)+","+(e==null?void 0:e.slug)})),I=[...b||[{label:"No Category",value:"no-category"}]].map(e=>({label:e==null?void 0:e.label,value:(e==null?void 0:e.value)+","+(e==null?void 0:e.slug)})),[v,le]=t.useState(Ne.createEmptyValue()),P=e=>{e&&le(e)},{register:d,control:E,reset:m,handleSubmit:H,formState:{errors:W}}=Ue({}),re=Re(Le),[te,L]=t.useState("No Brand"),[ne,K]=t.useState("No Category"),[B,oe]=t.useState("No Sub Category"),F=a.jsx(de,{showIcon:!0,type:"success",closable:!0,children:"Success : Product Added Successfully."}),i=a.jsx(de,{showIcon:!0,type:"error",closable:!0,children:"Error : Product Added Failed !."}),p=e=>{const s=v.toString("html");e.brand_id=M.split(",")[0],e.subcategory_id=R.split(",")[0],e.category_id=U.split(",")[0],e.fet_image=[...ee],e.product_image=j,e.brand_name=te,e.category_name=ne,e.subcategory_name=B,e.product_information=s,e.brand_slug=M.split(",")[1],e.category_slug=U.split(",")[1],e.subcategory_slug=R.split(",")[1],console.log(e),re.mutate({data:e,token:l.jwt},{onSuccess:r=>{o.push(F,{placement:"bottomStart",duration:2e3}),C(null),w(null),x(null)},onError:r=>{o.push(i,{placement:"bottomStart",duration:3e3})}}),setTimeout(()=>{window.location.reload()},1500)},[D,y]=t.useState(""),[fe,q]=t.useState(null),k=e=>{/^\d*$/.test(e)?(y(e),q("")):q("Only numeric values are allowed")};return a.jsx(a.Fragment,{children:a.jsx("section",{className:"p-6 bg-base-100 text-gray-900 h-screen ",children:a.jsxs("form",{onSubmit:H(p),className:"container flex flex-col mx-auto space-y-12 ",children:[a.jsxs("fieldset",{className:" grid grid-cols-4 gap-6 p-24 border-l-8 border-l-indigo-400 border-b-2 border-t hover:shadow-md rounded-md shadow-sm bg-base-50",children:[a.jsxs("div",{className:"space-y-2 col-span-full lg:col-span-1",children:[a.jsxs(h,{className:"text-sm",children:[a.jsx(h.Item,{as:J,to:"/dashbord",children:"Home"}),a.jsx(h.Item,{as:J,to:"/dashbord/product/list",children:"product-list"}),a.jsx(h.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),a.jsx("p",{className:"font-thin text-3xl",children:"Product & Feature Images"})]}),a.jsx("div",{className:"flex  flex-col flex-wrap gap-4 col-span-full lg:col-span-3",children:a.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-10",children:[a.jsxs("div",{className:"col-span-full sm:col-span-3",children:[a.jsx("p",{className:"font-bold font-mono text-sm underline",children:"Upload Product Image"}),a.jsx(ge,{fileListVisible:!1,listType:"picture",action:`${he.endpoints.host}/upload`,onUpload:e=>{N(!0),qe(e.blobFile,s=>{C(r=>({...r,product_image:s}))})},onSuccess:(e,s)=>{N(!1),w(e.fileUrl)},onError:()=>{C(null),N(!1),o.push(a.jsx(de,{type:"error",children:"Upload failed"}))},children:a.jsxs("button",{type:"button",style:{width:150,height:150},children:[c&&a.jsx(Ae,{backdrop:!0,center:!0}),O?a.jsx("img",{src:O.product_image,width:"100%",height:"150%",alt:"product_picture"}):a.jsx("img",{src:"https://www.ivins.com/wp-content/uploads/2020/09/placeholder-1.png",alt:"product_picture"})]})})]}),a.jsxs("div",{className:"col-span-full",children:[a.jsx("p",{className:"font-bold font-mono text-sm underline",children:"Upload Product Feature Image"}),a.jsx(ge,{multiple:!0,listType:"picture",action:`${he.endpoints.host}/upload`,onSuccess:e=>x(s=>[...s,e.fileUrl]),children:a.jsx("button",{type:"button",children:a.jsx(Ke,{})})})]})]})})]}),a.jsxs("fieldset",{className:"  grid grid-cols-4 gap-6 px-16 2xl:px-24 py-5 border-l-8 border-l-indigo-400 border-b-2 border-t hover:shadow-md rounded-md shadow-sm bg-base-50",children:[a.jsxs("div",{className:"space-y-2 col-span-full lg:col-span-1",children:[a.jsxs(h,{className:"text-sm",children:[a.jsx(h.Item,{as:J,to:"/dashbord",children:"Home"}),a.jsx(h.Item,{as:J,to:"/dashbord/product/list",children:"product-list"}),a.jsx(h.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),a.jsx("p",{className:"font-thin  text-3xl",children:"Product Inormation"})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 col-span-full lg:col-span-3",children:[a.jsxs("div",{className:"col-span-full sm:col-span-3 flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-bold",children:"Product Name"}),a.jsx(ve,{required:!0,className:"w-[12rem] 2xl:w-[14.5rem]",...d("name")}),a.jsx("div",{"data-lastpass-icon-root":"true"})]}),a.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-3 gap-1",children:[a.jsx("label",{className:"text-sm font-bold",children:"Select Company"}),a.jsx(ie,{name:"brand_id",...d("brand_id"),control:E,render:({field:e})=>a.jsx(ue,{searchable:!0,...e,size:"md",data:A,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(s,r)=>{e.onChange(s),ae(s),L(r.target.innerHTML)},onBlur:()=>e.onBlur()})})]}),a.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-3 gap-1",children:[a.jsx("label",{className:"text-sm font-bold",children:"Category"}),a.jsx(ie,{name:"category_id",...d("category_id"),control:E,render:({field:e})=>a.jsx(ue,{searchable:!0,...e,size:"md",data:I,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(s,r)=>{e.onChange(s),K(r.target.innerHTML),$(s)},onBlur:()=>e.onBlur()})})]}),a.jsxs("div",{className:"col-span-full flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-bold",children:"Subcategory"}),a.jsx(ie,{name:"sub_category_id",...d("subcategory_id"),control:E,render:({field:e})=>a.jsx(ue,{searchable:!0,...e,size:"md",data:g,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(s,r)=>{oe(r.target.innerHTML),e.onChange(s),z(s)},onBlur:()=>e.onBlur()})})]}),a.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-2 gap-1",children:[a.jsx("label",{className:"text-sm font-bold",children:"Price"}),a.jsx(X,{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 ",required:!0,...d("price"),onChange:k})]}),a.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-bold",children:"Minimum Purchase"}),a.jsx(X,{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 ",defaultValue:0,...d("min_purchease"),onChange:k})]}),a.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[a.jsx("label",{htmlFor:"zip",className:"text-sm font-bold",children:"Maximum Purchase"}),a.jsx(X,{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 ",defaultValue:0,...d("max_purchease"),onChange:k})]}),a.jsxs("div",{className:"flex flex-col mt-1",children:[a.jsx("label",{className:"text-sm font-bold",children:"Discount"}),a.jsx(X,{defaultValue:0,className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200",...d("discount"),onChange:k})]}),a.jsx("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:a.jsx("div",{className:"flex flex-col gap-5",children:a.jsxs("div",{className:"2xl:w-[100vh]",children:[a.jsx("label",{className:"text-sm font-bold",children:"Product Information"}),a.jsx(Ne,{className:"mt-2",toolbarConfig:Fe,value:v,onChange:P}),a.jsxs("div",{className:"flex gap-2 mt-10",children:[a.jsx(Z,{className:"2xl:w-[10rem]",appearance:"ghost",children:"Cancel"}),a.jsx(Z,{type:"submit","aria-required":!0,appearance:"primary",className:"bg-blue-600 font-bold 2xl:h-[3rem] 2xl:w-[10rem] ",children:"Add Product"})]})]})})})]})]})]})})})}export{ea as default};
