import{r as t,u as _,a as we,f as He,e as Le,d as y,c as Ie,j as e,k as Be,l as x,I as T,i as E,T as Oe,D as o,m as Ke,n as h,o as P,p as Me,q as W,R as Ae,M as F,_ as Re,A as _e,s as Te}from"./index-7665bfbb.js";import{a as Ee,d as Pe,b as We}from"./BrandServices-0e92b589.js";function Ge(){var O,K,M,A,R;t.useState(!1);const[i,$]=t.useState(!0),[m,q]=t.useState(!0),[U,Fe]=t.useState(!1);t.useState(10);const[k,b]=t.useState(1),[N,V]=t.useState(!0),[j,G]=t.useState(!0),[Q,$e]=t.useState(!1),[v,z]=t.useState(!0),p=_(s=>s.user.user),[J,X]=t.useState(""),[Y,S]=t.useState(!1);t.useState(!1),t.useState(null),t.useState(!1);const w=we();t.useState(!1),t.useState(null),t.useState({fileUrl:""}),t.useState(0);const{Column:Z,HeaderCell:H,Cell:a}=W,D=s=>e.jsx(a,{...s,style:{padding:4}}),ee=s=>e.jsx(H,{...s,style:{padding:4},children:e.jsx("div",{className:"flex justify-center font-bold",children:s.children})}),se=({rowData:s,dataKey:n,...l})=>e.jsx(a,{...l,children:e.jsx("div",{className:"flex justify-center -mt-2",children:e.jsx(_e,{className:"",src:(s==null?void 0:s.brand_image)||"https://avatars.githubusercontent.com/u/12592949",alt:"P"})})}),te=He(),{data:r,status:ne,refetch:c}=Le(["brands",k,p.jwt],Ee,{cacheTime:0}),le=({rowData:s,dataKey:n,...l})=>e.jsx(a,{...l,children:e.jsx("p",{className:"flex justify-center items-center",children:s==null?void 0:s.brand_label})}),re=({rowData:s,dataKey:n,...l})=>e.jsx(a,{...l,children:e.jsx("p",{className:"flex justify-center font-bold items-center",children:s==null?void 0:s.productCount})}),ae=({rowData:s,dataKey:n,...l})=>e.jsx(a,{...l,children:e.jsx("p",{className:"flex justify-center font-bold items-center",children:s==null?void 0:s.categoryCount})}),de=({rowData:s,dataKey:n,...l})=>e.jsx(a,{...l,children:e.jsx("p",{className:"flex justify-center items-center",children:s==null?void 0:s.brand_description})}),[ce,f]=t.useState(!1),[oe,ie]=t.useState(null),he=()=>{f(!0)},ue=y(Pe),xe=()=>{ue.mutate({deleteId:oe,token:p.jwt},{onSuccess:s=>{w.push(e.jsx(F,{type:"success",children:"Brand deleted successfully"})),c()},onError:s=>{w.push(e.jsx(F,{type:"error",children:"Brand delete failed !"}))}}),f(!1),c()},L=()=>f(!1),C=[{key:"brand_image",label:"Company Image",cellRenderer:se,width:200},{key:"brand_label",label:"Company Name",cellRenderer:le,width:250},{key:"categoryCount",label:"Category Count",cellRenderer:ae,width:150},{key:"productCount",label:"Product Count",cellRenderer:re,width:150},{key:"brand_description",label:"Company Description",cellRenderer:de,width:400},{key:"actions",label:"Actions",cellRenderer:({rowData:s,...n})=>{const l=()=>{he(),ie(s._id)},u=()=>{te("edit",{state:{myData:s}})};return e.jsx(a,{...n,children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-500 border px-3 py-2 -mt-1 hover:text-white hover:bg-indigo-500 rounded-lg ",onClick:u,children:"Edit"}),e.jsx("button",{className:"text-red-500 border px-3 py-2 -mt-1 rounded-lg  hover:text-white hover:bg-red-500 ",onClick:()=>l(),children:"Delete"})]})})},width:200}];y(Te),Ie();const d=y(We),me=s=>{X(s),s===""&&(c(),S(!1))},je=()=>{S(!0),Re.promise(d.mutateAsync({queryKey:["user_search",J,p.jwt]}),{loading:"Searching...",success:e.jsx("b",{children:"Company found!"}),error:e.jsx("b",{children:"Company not found in the database!"})})},pe=Y&&((O=d==null?void 0:d.data)!=null&&O.data[0])?[(K=d==null?void 0:d.data)==null?void 0:K.data[0]]:(M=r==null?void 0:r.data)==null?void 0:M.data,[I,fe]=t.useState(C.map(s=>s.key)),Ce=C.filter(s=>I.some(n=>n===s.key)),ge=i?D:a,ye=i?ee:H,ke=()=>{b(s=>{var n,l;return s<((l=(n=r==null?void 0:r.data)==null?void 0:n.meta)==null?void 0:l.total_page)?s+1:s}),c()},be=()=>{b(s=>Math.max(s-1,1)),c()},[Ne,B]=t.useState(!1),ve=s=>{s.target.value==="confirm"?B(!0):B(!1)};c();const g=_(s=>s.settings);return e.jsxs("div",{children:[e.jsx(Be,{}),e.jsxs(x,{open:ce,onClose:L,children:[e.jsxs(x.Header,{className:"p-5",children:[e.jsx(x.Title,{children:"Are you sure you want delete company ?"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"mt-2",children:"All Category and Product will be deleted under this company"}),e.jsx(T,{onChange:(s,n)=>ve(n),placeholder:"Type 'confirm' to delete"})]})]}),e.jsxs(x.Footer,{children:[e.jsx(E,{disabled:!Ne,onClick:xe,className:"bg-blue-500 w-20",appearance:"primary",children:"Confirm"}),e.jsx(E,{className:" bg-red-500 text-white",onClick:L,children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsx("hr",{}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex flex-col gap-5 2xl:flex-row 2xl:justify-between",children:[e.jsxs("div",{className:"",children:[e.jsx(Oe,{className:"h-12",data:C,labelKey:"label",valueKey:"key",value:I,onChange:fe,cleanable:!1}),e.jsxs(o,{className:"",icon:e.jsx(Ke,{}),children:[e.jsx(o.Item,{children:e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{children:"Compact："}),e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:i,onChange:$})]})}),e.jsx(o.Item,{children:e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{children:"Bordered："}),e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:m,onChange:q})]})}),e.jsx(o.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Show Header：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:N,onChange:V})]})}),e.jsx(o.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Hover：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:v,onChange:z})]})}),e.jsx(o.Item,{children:e.jsxs("span",{className:"flex justify-between",children:["Auto Height：",e.jsx(h,{checkedChildren:"On",unCheckedChildren:"Off",checked:j,onChange:G})]})})]})]}),e.jsx("div",{children:e.jsx("div",{className:" ",children:e.jsxs(P,{children:[e.jsx(T,{placeholder:"Search by Company Name",onChange:s=>me(s)}),e.jsx(P.Button,{onClick:()=>je(),tabIndex:-1,children:e.jsx(Me,{className:"text-indigo-500 font-bold"})})]})})})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-5",style:{height:j?"auto":400},children:[e.jsx(W,{loading:ne==="loading",height:300,hover:v,fillHeight:Q,showHeader:N,autoHeight:j,data:U?[]:pe,bordered:m,cellBordered:m,headerHeight:i?40:30,rowHeight:i?56:30,children:Ce.map(s=>{const{key:n,label:l,cellRenderer:u,...Se}=s;return t.createElement(Z,{...Se,key:n},e.jsx(ye,{children:l}),u?Ae.createElement(u,{dataKey:n}):e.jsx(ge,{dataKey:n}))})}),e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex items-center justify-center py-10 lg:px-0 sm:px-6 px-4",children:e.jsxs("div",{className:"lg:w-3/5 w-full  flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4L4.49984 7.33333",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4.00002L4.49984 0.666687",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("p",{onClick:be,className:`text-sm ml-3 font-medium leading-none ${g.theme==="dark"&&"text-white"} `,children:"Previous"})]}),e.jsx("div",{className:"sm:flex hidden",children:e.jsxs("p",{className:`text-sm font-bold leading-none cursor-pointer text-gray-600 hover:text-indigo-700 border-t border-transparent hover:border-indigo-400 pt-3 mr-4 px-2 ${g.theme==="dark"&&"text-white"}`,children:["pages : ",k,"/",(R=(A=r==null?void 0:r.data)==null?void 0:A.meta)==null?void 0:R.total_page]})}),e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsx("p",{onClick:ke,className:`text-sm font-medium leading-none mr-3 ${g.theme==="dark"&&"text-white"}`,children:"Next"}),e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 7.33333L12.8333 4",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 0.666687L12.8333 4.00002",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})})})]})]})]})}export{Ge as default};
