import{u as X,r as t,b as Y,j as e,S as Z,L as I,c as ee,B}from"./index-45bd0b18.js";import{u as se,C as g}from"./index.esm-8d42596e.js";import{u as re}from"./find-c3818947.js";import{u as b}from"./useQuery-ea9946a5.js";import{g as ae}from"./BrandServices-8ee56d58.js";import{a as te}from"./CategoryService-d66eff77.js";import{c as oe}from"./ProductService-133937d5.js";import{g as ne}from"./SubCategoryServices-d6aa268c.js";import{c as P}from"./api.config-65890cae.js";import{u as le}from"./useToaster-8c146127.js";import{B as i}from"./Breadcrumb-6172fe58.js";import{P as de}from"./Panel-9e34cf8c.js";import{U,I as n}from"./Uploader-5d1dfb1a.js";import{M as f}from"./toaster-3317b793.js";import{c as ce}from"./createLucideIcon-23fda54c.js";import{S as N}from"./SelectPicker-7cd71d62.js";import"./AngleDown-9c7cb1f2.js";import"./statusIcons-c1debc2b.js";import"./propTypes-8a62bd57.js";import"./isArrayLikeObject-31c550f5.js";const ie=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function ue(l,d){const c=new FileReader;c.onloadend=()=>{d(c.result)},c.readAsDataURL(l)}function qe(){var _,C,w;const l=X(s=>s.user.user),d=le(),[c,u]=t.useState(!1),[y,m]=t.useState({product_image:""}),[M,S]=t.useState([]),[L,v]=t.useState(null),[k,q]=t.useState("brand"),[F,R]=t.useState(""),{data:p}=b(["brandsIdName",l.jwt],ae),{data:x}=b(["categoryIdName","",l.jwt,k,-1],te),{data:h}=b(["subCategoryIdName","",l.jwt,F,-1],ne),T=(_=x==null?void 0:x.data)==null?void 0:_.map(s=>({label:s==null?void 0:s.category_label,value:s._id})),A=(C=h==null?void 0:h.data)==null?void 0:C.map(s=>({label:s==null?void 0:s.subcategory_name,value:s._id})),E=[...((w=p==null?void 0:p.data)==null?void 0:w.map(s=>({label:s==null?void 0:s.name,value:s.id})))||["loading"]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),H=[...T||[{label:"No Category",value:"no-category"}]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),{register:a,control:j,reset:z,handleSubmit:D,formState:{errors:pe}}=se(),$=re(oe),[Q,V]=t.useState("No Brand"),[G,J]=t.useState("No Category"),[K,O]=t.useState("No Sub Category"),W=s=>{s.fet_image=[...M],s.product_image=L,s.brand_name=Q,s.category_name=G,s.subcategory_name=K,$.mutate({data:s,token:l.jwt},{onSuccess:r=>{d.push(e.jsx(f,{type:"success",children:"Product added successfully"})),m(null),v(null),S(null)},onError:r=>{d.push(e.jsx(f,{type:"error",children:"Product add failed !"}))}}),z()};return Y(),e.jsx(e.Fragment,{children:e.jsxs(Z,{justifyContent:"center",alignItems:"center",direction:"column",className:"mt-28 2xl:mt-5 ",style:{height:"100vh"},children:[e.jsxs(i,{className:"text-xl font-mono ",children:[e.jsx(i.Item,{as:I,to:"/dashbord",children:"Home"}),e.jsx(i.Item,{as:I,to:"/dashbord/product/list",children:"product-list"}),e.jsx(i.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),e.jsx(de,{bordered:!0,className:"shadow-sm w-[48.5rem]",style:{background:"#fff"},header:e.jsx("h3",{className:"font-bold bg-indigo-700 p-8 text-2xl text-white rounded-lg",children:"Add Product Information"}),children:e.jsx("form",{onSubmit:D(W),children:e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center mb-5 ",children:e.jsx(U,{fileListVisible:!1,listType:"picture",action:`${P.endpoints.host}/upload`,onUpload:s=>{u(!0),ue(s.blobFile,r=>{m(o=>({...o,product_image:r}))})},onSuccess:(s,r)=>{u(!1),v(s.fileUrl)},onError:()=>{m(null),u(!1),d.push(e.jsx(f,{type:"error",children:"Upload failed"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[c&&e.jsx(ee,{backdrop:!0,center:!0}),y?e.jsx("img",{src:y.product_image,width:"100%",height:"150%",alt:"product_picture"}):e.jsx("img",{src:"https://www.ivins.com/wp-content/uploads/2020/09/placeholder-1.png",alt:"product_picture"})]})})}),e.jsx("div",{className:"mt-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Feature Image"}),e.jsx("div",{className:"flex gap-5",children:e.jsx(U,{multiple:!0,listType:"picture",action:`${P.endpoints.host}/upload`,onSuccess:s=>S(r=>[...r,s.fileUrl]),children:e.jsx("button",{type:"button",children:e.jsx(ie,{})})})})]})}),e.jsxs("div",{className:"flex gap-5 mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Product Name"}),e.jsx(n,{required:!0,className:"w-[14.5rem]",...a("name")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Company"}),e.jsx(g,{name:"brand_id",...a("brand_id"),control:j,render:({field:s})=>e.jsx(N,{searchable:!0,...s,size:"md",data:E,className:"w-[14.5rem]",onChange:(r,o)=>{s.onChange(r),q(r),V(o.target.innerHTML)},onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Category"}),e.jsx(g,{name:"category_id",...a("category_id"),control:j,render:({field:s})=>e.jsx(N,{searchable:!0,...s,size:"md",data:H,className:"w-[14.5rem]",onChange:(r,o)=>{s.onChange(r),J(o.target.innerHTML),R(r)},onBlur:()=>s.onBlur()})})]})]}),e.jsxs("div",{className:"flex gap-5 mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Sub Category"}),e.jsx(g,{name:"sub_category_id",...a("subcategory_id"),control:j,render:({field:s})=>e.jsx(N,{searchable:!0,...s,size:"md",data:A,className:"w-[14.5rem]",onChange:(r,o)=>{O(o.target.innerHTML),s.onChange(r)},onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Price"}),e.jsx(n,{className:"w-[14.5rem]",required:!0,...a("price")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Minimum Purchase"}),e.jsx(n,{className:"w-[14.5rem]",required:!0,...a("min_purchease")})]})]}),e.jsxs("div",{className:"flex gap-5  mt-3 ",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Maximum Purchase"}),e.jsx(n,{className:"w-[14.5rem]",required:!0,...a("max_purchease")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Base Price"}),e.jsx(n,{className:"w-[14.5rem]",required:!0,...a("base_price")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Discount"}),e.jsx(n,{className:"w-[14.5rem]",required:!0,...a("discount")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold mt-3",children:"Description"}),e.jsx(n,{as:"textarea",required:!0,...a("des"),rows:3,placeholder:""})]}),e.jsxs("div",{className:"mt-10 flex gap-2",children:[e.jsx(B,{appearance:"ghost",children:"Cancel"}),e.jsx(B,{type:"submit","aria-required":!0,appearance:"primary",className:"bg-blue-600 font-bold",children:"Add Product"})]})]})})})]})})}export{qe as default};
