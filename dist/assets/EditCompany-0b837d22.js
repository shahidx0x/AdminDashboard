import{u as C,a as w,r as d,e as I,b as _,c as k,j as e,S as F,L as b,P as L,f as B,M as r,g as E,I as j,B as g}from"./index-e8ba72f9.js";import{u as R}from"./index.esm-2063f0ea.js";import{u as T}from"./BrandServices-06b57763.js";import{B as l}from"./Breadcrumb-2feb6f7a.js";import{U as M}from"./Uploader-65528f4a.js";function P(i,t){const n=new FileReader;n.onloadend=()=>{t(n.result)},n.readAsDataURL(i)}function O(){var x;const i=C(a=>a.user.user),t=w(),[n,c]=d.useState(!1),[u,m]=d.useState(null),[p,y]=d.useState({fileUrl:""}),f=I(),s=(x=_().state)==null?void 0:x.myData,{register:h,control:A,handleSubmit:N,reset:H,formState:{errors:$}}=R(),S=k(T),U=a=>{p.fileUrl!==""?a.brand_image=p.fileUrl:a.brand_image="",S.mutate({data:a,token:i.jwt,id:s._id},{onSuccess:o=>{t.push(e.jsx(r,{type:"success",children:"Company update successfully"})),f("/dashbord/all-company")},onError:o=>{console.log(o),t.push(e.jsx(r,{type:"error",children:"Company update failed ! Try Again."}))}})};function v(){f("/dashbord/all-company")}return e.jsx(e.Fragment,{children:e.jsxs(F,{justifyContent:"center",alignItems:"center",direction:"column",className:"-mt-16 ",style:{height:"100vh"},children:[e.jsxs(l,{className:"text-xl -mt-20 font-mono",children:[e.jsx(l.Item,{as:b,to:"/dashbord",children:"Home"}),e.jsx(l.Item,{as:b,to:"/dashbord/all-company",children:"company-list"}),e.jsx(l.Item,{active:!0,className:"text-blue-400",children:"company-update"})]}),e.jsx(L,{bordered:!0,className:"shadow-md -mt-10 w-[50rem] border-gray-300",style:{background:"#fff"},header:e.jsx("h3",{className:"font-bold text-2xl rounded-lg p-8 bg-indigo-500 text-white",children:"Update Company Information"}),children:e.jsxs("form",{onSubmit:N(U),children:[e.jsx("div",{className:"flex justify-center items-center mb-10",children:e.jsx(M,{fileListVisible:!1,listType:"picture",action:`${B.endpoints.host}/upload`,onUpload:a=>{c(!0),P(a.blobFile,o=>{m(o)})},onSuccess:(a,o)=>{c(!1),t.push(e.jsx(r,{type:"success"})),y(a)},onError:()=>{m(null),c(!1),t.push(e.jsx(r,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[n&&e.jsx(E,{backdrop:!0,center:!0}),u?e.jsx("img",{src:u,width:"100%",height:"150%"}):e.jsx("img",{src:s==null?void 0:s.brand_image,alt:"Company Profile"})]})})}),e.jsx("div",{className:"flex gap-5 justify-center",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Company Name"}),e.jsx(j,{...h("brand_label"),defaultValue:s==null?void 0:s.brand_label,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Company Information"}),e.jsx(j,{defaultValue:s==null?void 0:s.brand_description,...h("brand_description"),as:"textarea",rows:3})]}),e.jsxs("div",{className:"mb-20 flex gap-2",children:[e.jsx(g,{appearance:"ghost",onClick:()=>v(),children:"Cancel"}),e.jsx(g,{type:"submit",appearance:"primary",className:"bg-blue-600",children:"Update Company"})]})]})})]})})]})})}export{O as default};
