import{R as b,q as ke,x as Ee,s as $e,y as Ue,r,K as Y,z as Be,I as Pe,t as ve,D as De,E as pe,F as ye,i as ae,G as Me,H as Re,v as n,m as Ae,J as Le,u as we,a as Te,e as J,c as Fe,d as Ve,j as a,B as j,L as X,U as Ce,g as _e,M as ue,h as Oe,C as me,O as ze,Q as He}from"./index-f62f07f3.js";import{R as Se,t as We}from"./toolbar.config-a32f981d.js";import{g as qe}from"./BrandServices-2d1c4597.js";import{a as Ke}from"./CategoryService-69e8b503.js";import{g as Ge}from"./SubCategoryServices-e89b083b.js";import{S as Z}from"./SelectPicker-6970ad03.js";var Qe=function(c){return/(^-?|^\+?|^\d?)\d*\.\d+$/.test(c+"")};function Ye(t){return Qe(t)?t.toString().split(".")[1].length:0}function Ie(){for(var t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];var v=c.map(Ye);return Math.max.apply(Math,v)}function Je(t,c){return pe(t)?!1:+t>=c}function Xe(t,c){return pe(t)?!1:+t<=c}var xe=b.forwardRef(function(t,c){var i=t.as,v=i===void 0?Ae:i,O=t.className,I=t.classPrefix,se=I===void 0?"input-number":I,g=t.disabled,y=t.readOnly,P=t.plaintext,D=t.value,te=t.defaultValue,M=t.size,z=t.prefix,R=t.postfix,H=t.step,f=H===void 0?1:H,k=t.buttonAppearance,E=k===void 0?"subtle":k,u=t.min,w=t.max,le=t.scrollable,A=le===void 0?!0:le,$=t.onChange,L=t.onWheel,re=ke(t,["as","className","classPrefix","disabled","readOnly","plaintext","value","defaultValue","size","prefix","postfix","step","buttonAppearance","min","max","scrollable","onChange","onWheel"]),U=u??-1/0,C=w??1/0,W=Ee(D,te),p=W[0],q=W[1],x=$e(se),T=x.withClassPrefix,fe=x.merge,F=x.prefix,he=fe(O,T()),K=Ue(re),B=K[0],ne=K[1],V=r.useRef(),m=r.useCallback(function(s,l){s!==p&&(q(s),$==null||$(s,l))},[$,q,p]),h=r.useCallback(function(s){return Number.isNaN(s)?s="":(+s>C&&(s=C),+s<U&&(s=U)),s.toString()},[C,U]),_=r.useCallback(function(s){var l=+(p||0),o=Ie(l,f);m(h((l+f).toFixed(o)),s)},[h,m,f,p]),S=r.useCallback(function(s){var l=+(p||0),o=Ie(l,f);m(h((l-f).toFixed(o)),s)},[h,m,f,p]),oe=g||y||Je(p,C),G=g||y||Xe(p,U),ce=r.useCallback(function(s){switch(s.key){case Y.UP:s.preventDefault(),_(s);break;case Y.DOWN:s.preventDefault(),S(s);break;case Y.HOME:typeof u<"u"&&(s.preventDefault(),m(h(u),s));break;case Y.END:typeof w<"u"&&(s.preventDefault(),m(h(w),s));break}},[_,S,u,w,m,h]),Q=r.useCallback(function(s){if(!A){s.preventDefault();return}if(!g&&!y&&s.target===document.activeElement){s.preventDefault();var l=s.wheelDelta||-s.deltaY||-(s==null?void 0:s.detail);l>0&&S(s),l<0&&_(s)}L==null||L(s)},[g,S,_,L,y,A]),be=r.useCallback(function(s,l){!/^-?(?:\d+)?(\.)?\d*$/.test(s)&&s!==""||m(s,l)},[m]),de=r.useCallback(function(s){var l,o=Number.parseFloat((l=s.target)===null||l===void 0?void 0:l.value);m(h(o),s)},[h,m]);r.useEffect(function(){var s;return V.current&&(s=Be(V.current,"wheel",Q,{passive:!1})),function(){var l;(l=s)===null||l===void 0||l.off()}},[Q,A]);var ie=b.createElement(Pe,ve({},B,{type:"number",autoComplete:"off",step:f,inputRef:V,onChange:be,onBlur:De(de,B==null?void 0:B.onBlur),value:pe(p)?"":""+p,disabled:g,readOnly:y,plaintext:P,ref:P?c:void 0,onKeyDown:ce}));return P?ie:b.createElement(v,ve({},ne,{ref:c,className:he,disabled:g,size:M}),z&&b.createElement(ye,null,z),ie,b.createElement("span",{className:F("btn-group-vertical")},b.createElement(ae,{tabIndex:-1,appearance:E,className:F("touchspin-up"),onClick:_,disabled:oe,"aria-label":"Increment"},b.createElement(Me,null)),b.createElement(ae,{tabIndex:-1,appearance:E,className:F("touchspin-down"),onClick:S,disabled:G,"aria-label":"Decrement"},b.createElement(Re,null))),R&&b.createElement(ye,null,R))});xe.displayName="InputNumber";xe.propTypes={className:n.string,classPrefix:n.string,min:n.number,max:n.number,step:n.number,value:n.oneOfType([n.number,n.string]),defaultValue:n.oneOfType([n.number,n.string]),prefix:n.node,postfix:n.node,disabled:n.bool,readOnly:n.bool,plaintext:n.bool,scrollable:n.bool,size:n.oneOf(["lg","md","sm","xs"]),buttonAppearance:n.oneOf(["default","primary","link","subtle","ghost"]),onWheel:n.func,onChange:n.func};const ee=xe,Ze=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function ea(t,c){const i=new FileReader;i.onloadend=()=>{c(i.result)},i.readAsDataURL(t)}function oa(){var ge,Ne,je;const t=we(e=>e.user.user),c=Te(),[i,v]=r.useState(!1),[O,I]=r.useState({product_image:""}),[se,g]=r.useState([]),[y,P]=r.useState(null),[D,te]=r.useState("brand"),[M,z]=r.useState(""),[R,H]=r.useState(""),{data:f}=J(["brandsIdName",t.jwt],qe),{data:k}=J(["categoryIdName","",t.jwt,D.split(",")[0],-1],Ke),{data:E}=J(["subCategoryIdName","",t.jwt,M.split(",")[0],-1],Ge),{data:u,status:w,refetch:le}=J(["units",t.jwt],ze,{cacheTime:0}),A=(ge=k==null?void 0:k.data)==null?void 0:ge.map(e=>({label:e==null?void 0:e.category_label,value:e._id,slug:e.category_slug})),$=(Ne=E==null?void 0:E.data)==null?void 0:Ne.map(e=>({label:e==null?void 0:e.subcategory_name,value:e._id+","+e.subcategory_slug})),re=[...((je=f==null?void 0:f.data)==null?void 0:je.map(e=>({label:e==null?void 0:e.name,value:e.id,slug:e.slug})))||["loading"]].map(e=>({label:e==null?void 0:e.label,value:(e==null?void 0:e.value)+","+(e==null?void 0:e.slug)})),U=[...A||[{label:"No Category",value:"no-category"}]].map(e=>({label:e==null?void 0:e.label,value:(e==null?void 0:e.value)+","+(e==null?void 0:e.slug)})),[C,W]=r.useState(Se.createEmptyValue()),p=u==null?void 0:u.data.map(e=>({label:e.label,value:e.value}));console.log(u==null?void 0:u.data);const q=e=>{e&&W(e)},{register:x,control:T,reset:fe,handleSubmit:F,formState:{errors:he}}=Fe({}),K=Ve(He),[B,ne]=r.useState("No Brand"),[V,m]=r.useState("No Category"),[h,_]=r.useState("No Sub Category"),S=a.jsx(ue,{showIcon:!0,type:"success",closable:!0,children:"Success : Product Added Successfully."}),oe=a.jsx(ue,{showIcon:!0,type:"error",closable:!0,children:"Error : Product Added Failed !."}),[G,ce]=r.useState("Pices"),Q=e=>{const d=C.toString("html");e.brand_id=D.split(",")[0],e.subcategory_id=R.split(",")[0],e.category_id=M.split(",")[0],e.fet_image=[...se],e.product_image=y,e.product_unit_type=G,e.brand_name=B,e.category_name=V,e.subcategory_name=h,e.product_information=d,e.brand_slug=D.split(",")[1],e.category_slug=M.split(",")[1],e.subcategory_slug=R.split(",")[1],G==="Pices"?e.unit_flag=1:e.unit_flag=0,K.mutate({data:e,token:t.jwt},{onSuccess:N=>{c.push(S,{placement:"bottomStart",duration:2e3}),I(null),P(null),g(null)},onError:N=>{c.push(oe,{placement:"bottomStart",duration:3e3})}}),setTimeout(()=>{window.location.reload()},1500)},[be,de]=r.useState(""),[ie,s]=r.useState(null),l=e=>{/^\d*$/.test(e)?(de(e),s("")):s("Only numeric values are allowed")},o=we(e=>e.settings);return a.jsx(a.Fragment,{children:a.jsx("section",{className:"p-6 bg-base-100 text-gray-900 h-screen ",children:a.jsxs("form",{onSubmit:F(Q),className:"container flex flex-col mx-auto space-y-12 ",children:[a.jsxs("fieldset",{className:" grid grid-cols-4 gap-6 p-24 border-l-8 border-l-indigo-400 border-b-2 border-t hover:shadow-md rounded-md shadow-sm bg-base-50",children:[a.jsxs("div",{className:"space-y-2 col-span-full lg:col-span-1",children:[a.jsxs(j,{className:"text-sm",children:[a.jsx(j.Item,{as:X,to:"/dashbord",children:"Home"}),a.jsx(j.Item,{as:X,to:"/dashbord/product/list",children:"product-list"}),a.jsx(j.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),a.jsx("p",{className:`font-thin text-3xl ${o.theme==="dark"&&"text-white"} `,children:"Product & Feature Images"})]}),a.jsx("div",{className:"flex  flex-col flex-wrap gap-4 col-span-full lg:col-span-3",children:a.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-10",children:[a.jsxs("div",{className:"col-span-full sm:col-span-3",children:[a.jsx("p",{className:`font-thin text-sm underline ${o.theme==="dark"&&"text-white"} `,children:"Upload Product Image"}),a.jsx(Ce,{fileListVisible:!1,listType:"picture",action:`${_e.endpoints.host}/upload`,onUpload:e=>{v(!0),ea(e.blobFile,d=>{I(N=>({...N,product_image:d}))})},onSuccess:(e,d)=>{v(!1),P(e.fileUrl)},onError:()=>{I(null),v(!1),c.push(a.jsx(ue,{type:"error",children:"Upload failed"}))},children:a.jsxs("button",{type:"button",style:{width:150,height:150},children:[i&&a.jsx(Oe,{backdrop:!0,center:!0}),O?a.jsx("img",{src:O.product_image,width:"100%",height:"150%",alt:"product_picture"}):a.jsx("img",{src:"https://www.ivins.com/wp-content/uploads/2020/09/placeholder-1.png",alt:"product_picture"})]})})]}),a.jsxs("div",{className:"col-span-full",children:[a.jsx("p",{className:`font-thin text-sm underline ${o.theme==="dark"&&"text-white"} `,children:"Upload Product Feature Image"}),a.jsx(Ce,{multiple:!0,listType:"picture",action:`${_e.endpoints.host}/upload`,onSuccess:e=>g(d=>[...d,e.fileUrl]),children:a.jsx("button",{type:"button",children:a.jsx(Ze,{})})})]})]})})]}),a.jsxs("fieldset",{className:"  grid grid-cols-4 gap-6 px-16 2xl:px-24 py-5 border-l-8 border-l-indigo-400 border-b-2 border-t hover:shadow-md rounded-md shadow-sm bg-base-50",children:[a.jsxs("div",{className:"space-y-2 col-span-full lg:col-span-1",children:[a.jsxs(j,{className:"text-sm",children:[a.jsx(j.Item,{as:X,to:"/dashbord",children:"Home"}),a.jsx(j.Item,{as:X,to:"/dashbord/product/list",children:"product-list"}),a.jsx(j.Item,{active:!0,className:"text-blue-400",children:"product-creation"})]}),a.jsx("p",{className:`font-thin text-3xl  ${o.theme==="dark"&&"text-white"} `,children:"Product Inormation"})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 col-span-full lg:col-span-3",children:[a.jsxs("div",{className:"col-span-full sm:col-span-3 flex flex-col gap-1",children:[a.jsx("label",{className:`font-bold text-sm  ${o.theme==="dark"&&"text-white"} `,children:"Product Name"}),a.jsx(Pe,{required:!0,className:"w-[12rem] 2xl:w-[14.5rem]",...x("name")}),a.jsx("div",{"data-lastpass-icon-root":"true"})]}),a.jsxs("div",{className:"col-span-full sm:col-span-3 flex flex-col gap-1",children:[a.jsx("label",{className:`font-bold text-sm  ${o.theme==="dark"&&"text-white"} `,children:"Product Unit Type"}),a.jsx(Z,{className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(e,d)=>ce(e),searchable:!1,data:p}),a.jsx("div",{"data-lastpass-icon-root":"true"})]}),a.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-3 gap-1",children:[a.jsx("label",{className:`font-bold text-sm  ${o.theme==="dark"&&"text-white"} `,children:"Select Company"}),a.jsx(me,{name:"brand_id",...x("brand_id"),control:T,render:({field:e})=>a.jsx(Z,{searchable:!0,...e,size:"md",data:re,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(d,N)=>{e.onChange(d),te(d),ne(N.target.innerHTML)},onBlur:()=>e.onBlur()})})]}),a.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-3 gap-1",children:[a.jsx("label",{className:`font-bold text-sm  ${o.theme==="dark"&&"text-white"} `,children:"Select Brand"}),a.jsx(me,{name:"category_id",...x("category_id"),control:T,render:({field:e})=>a.jsx(Z,{searchable:!0,...e,size:"md",data:U,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(d,N)=>{e.onChange(d),m(N.target.innerHTML),z(d)},onBlur:()=>e.onBlur()})})]}),a.jsxs("div",{className:"col-span-full flex flex-col gap-1",children:[a.jsx("label",{className:`font-bold text-sm  ${o.theme==="dark"&&"text-white"} `,children:"Select Category"}),a.jsx(me,{name:"sub_category_id",...x("subcategory_id"),control:T,render:({field:e})=>a.jsx(Z,{searchable:!0,...e,size:"md",data:$,className:"w-[12rem] 2xl:w-[14.5rem]",onChange:(d,N)=>{_(N.target.innerHTML),e.onChange(d),H(d)},onBlur:()=>e.onBlur()})})]}),a.jsxs("div",{className:"flex flex-col col-span-full sm:col-span-2 gap-1",children:[a.jsx("label",{className:`font-bold text-sm  ${o.theme==="dark"&&"text-white"} `,children:"Price"}),a.jsx(ee,{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 ",required:!0,...x("price"),onChange:l})]}),a.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[a.jsx("label",{className:`font-bold text-sm  ${o.theme==="dark"&&"text-white"} `,children:"Minimum Purchase"}),a.jsx(ee,{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 ",defaultValue:0,...x("min_purchease"),onChange:l})]}),a.jsxs("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:[a.jsx("label",{htmlFor:"zip",className:`font-bold text-sm  ${o.theme==="dark"&&"text-white"} `,children:"Maximum Purchase"}),a.jsx(ee,{className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200 ",defaultValue:0,...x("max_purchease"),onChange:l})]}),a.jsxs("div",{className:"flex flex-col mt-1",children:[a.jsx("label",{className:`font-bold text-sm  ${o.theme==="dark"&&"text-white"} `,children:"Discount"}),a.jsx(ee,{defaultValue:0,className:"w-[12rem] 2xl:w-[14.5rem] h-[2.24rem] rounded-md border border-gray-200",...x("discount"),onChange:l})]}),a.jsx("div",{className:"col-span-full sm:col-span-2 flex flex-col gap-1",children:a.jsx("div",{className:"flex flex-col gap-5",children:a.jsxs("div",{className:"2xl:w-[100vh]",children:[a.jsx("label",{className:`font-bold text-sm  ${o.theme==="dark"&&"text-white"} `,children:"Product Information"}),a.jsx(Se,{className:"mt-2",toolbarConfig:We,value:C,onChange:q}),a.jsxs("div",{className:"flex gap-2 mt-10",children:[a.jsx(ae,{className:"2xl:w-[10rem]",appearance:"ghost",children:"Cancel"}),a.jsx(ae,{type:"submit","aria-required":!0,appearance:"primary",className:"bg-blue-600 font-bold 2xl:h-[3rem] 2xl:w-[10rem] ",children:"Add Product"})]})]})})})]})]})]})})})}export{oa as default};
