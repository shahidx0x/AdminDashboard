import{u as P,r as n,a as R,b as E,c as M,d as V,j as e,S as H,L as y,e as z,M as c,f as Q,I as p,B as N}from"./index-5ccc964f.js";import{u as $,C as q}from"./index.esm-a48af042.js";import{g as G}from"./BrandServices-3275ca36.js";import{c as J}from"./CategoryService-013ec7ca.js";import{u as K}from"./useToaster-f36faecc.js";import{B as i}from"./Breadcrumb-5b051a16.js";import{P as O}from"./Panel-7e2340e0.js";import{U as W}from"./Uploader-a8f11f84.js";import{S as X}from"./SelectPicker-962a459d.js";function Y(l,r){const o=new FileReader;o.onloadend=()=>{r(o.result)},o.readAsDataURL(l)}function ue(){var b,j;const l=P(s=>s.user.user),r=K(),[o,u]=n.useState(!1),[x,m]=n.useState(null),[h,S]=n.useState({fileUrl:""}),a=(b=R().state)==null?void 0:b.myData,{register:d,control:C,handleSubmit:v,reset:g,formState:{errors:D}}=$(),I=E(J),[w,_]=n.useState(null),[U,B]=n.useState(null),k=s=>{h.fileUrl!==""?s.image=h.fileUrl:s.image="",s.brand_id=w,s.brand_name=U,console.table(s),I.mutate({data:s,token:l.jwt},{onSuccess:t=>{r.push(e.jsx(c,{type:"success",children:"Category added successfully"})),m(null),g()},onError:t=>{r.push(e.jsx(c,{type:"error",children:"Category Add failed ! Try Again."}))}}),g()},{data:f,status:ee}=M(["brandsIdName",l.jwt],G),A=[...((j=f==null?void 0:f.data)==null?void 0:j.map(s=>({label:s==null?void 0:s.name,value:s.id})))||["loading"]].map(s=>({label:s==null?void 0:s.label,value:s==null?void 0:s.value})),L=V();function F(){L("/dashbord/all-company")}return e.jsx(e.Fragment,{children:e.jsxs(H,{justifyContent:"center",alignItems:"center",direction:"column",className:"mt-20 2xl:mt-[-3rem] ",style:{height:"100vh"},children:[e.jsxs(i,{className:"text-xl font-mono ",children:[e.jsx(i.Item,{as:y,to:"/dashbord",children:"Home"}),e.jsx(i.Item,{as:y,to:"/dashbord/category/all",children:"category-list"}),e.jsx(i.Item,{active:!0,className:"text-blue-400",children:"category-creation"})]}),e.jsx(O,{bordered:!0,className:"shadow-sm w-[45rem]",style:{background:"#fff"},header:e.jsx("h3",{className:"font-bold bg-indigo-700 p-8 text-2xl text-white rounded-lg",children:"Add Category Information"}),children:e.jsxs("form",{onSubmit:v(k),children:[e.jsx("div",{className:"flex justify-center items-center mb-10 ",children:e.jsx(W,{fileListVisible:!1,listType:"picture",action:`${z.endpoints.host}/upload`,onUpload:s=>{u(!0),Y(s.blobFile,t=>{m(t)})},onSuccess:(s,t)=>{u(!1),r.push(e.jsx(c,{type:"success"})),S(s)},onError:()=>{m(null),u(!1),r.push(e.jsx(c,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[o&&e.jsx(Q,{backdrop:!0,center:!0}),x?e.jsx("img",{src:x,width:"100%",height:"150%"}):e.jsx("img",{src:a==null?void 0:a.profilePicture,alt:"Category Profile"})]})})}),e.jsx("div",{className:"flex  gap-5 justify-center",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Select Company"}),e.jsx(q,{name:"brand_id",...d("brand_id"),control:C,render:({field:s})=>e.jsx(X,{searchable:!0,...s,size:"md",data:A,className:"w-96",onChange:(t,T)=>{s.onChange(t),B(T.target.innerHTML),_(t)},onBlur:()=>s.onBlur()})})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Category Name"}),e.jsx(p,{...d("category_label"),defaultValue:a==null?void 0:a.firstName,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Category Type"}),e.jsx(p,{...d("category_type"),defaultValue:a==null?void 0:a.firstName,className:"w-96"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Category Information"}),e.jsx(p,{defaultValue:a==null?void 0:a.description,...d("category_description"),as:"textarea",rows:3})]}),e.jsxs("div",{className:"2xl:mb-4 flex gap-2 ",children:[e.jsx(N,{appearance:"ghost",className:"font-bold",onClick:()=>F(),children:"Cancel"}),e.jsx(N,{type:"submit",appearance:"primary",className:"bg-blue-600 font-bold",children:"Add Category"})]})]})})]})})]})})}export{ue as default};
