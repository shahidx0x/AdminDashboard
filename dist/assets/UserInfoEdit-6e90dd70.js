import{u as T,a as R,r as i,b as y,c as H,e as Q,d as Z,f as $,j as e,S as q,P as G,B as u,L as w,a5 as J,U as K,g as O,M as x,h as W,I as t,C as S,i as U,s as X}from"./index-3c763a15.js";import{g as Y}from"./BrandServices-1fccebf5.js";import{S as A}from"./SelectPicker-ddc4f8f1.js";function D(d,c){const o=new FileReader;o.onloadend=()=>{c(o.result)},o.readAsDataURL(d)}function ce(){var g,v;const d=T(s=>s.user.user),c=R(),[o,m]=i.useState(!1),[f,h]=i.useState(null),[r,C]=i.useState({fileUrl:""}),l=(g=y().state)==null?void 0:g.myData,[j,B]=i.useState(void 0),[I,_]=i.useState(void 0),{register:n,control:b,watch:P,handleSubmit:L,formState:{errors:se}}=H({defaultValues:{isAccountActive:l==null?void 0:l.isAccountActive}});P("isAccountActive");const{data:p,status:le}=Q(["brandsIdName",d.jwt],Y),F=[...((v=p==null?void 0:p.data)==null?void 0:v.map(s=>({label:s==null?void 0:s.name,value:s.id,slug:s.slug})))||["loading"]].map(s=>({label:s==null?void 0:s.label,value:(s==null?void 0:s.value)+","+s.slug})),V=Z(X),k=s=>{r.fileUrl!==""?s.profilePicture=r.fileUrl:s.profilePicture="",s.company=I,s.ac_status===void 0&&(s.ac_status=0),j&&(s.company_slug=j.split(",")[1],s.companyAssignedBy="Admin"),s.company===void 0&&(s.company=l.company),s.ac_status===1&&(s.isAccountActive=!0),V.mutate({data:s,token:d.jwt},{onSuccess:a=>{c.push(e.jsx(x,{type:"success",children:"Updated successfully"})),N(-1)},onError:a=>{c.push(e.jsx(x,{type:"error",children:"Update failed !"}))}})},E=[{label:"Active",value:1},{label:"Reject",value:-1}].map(s=>({label:s.label,value:s.value})),N=$();function z(){N("/dashbord/user-table")}return e.jsx(e.Fragment,{children:e.jsx(q,{justifyContent:"center",alignItems:"center",direction:"column",className:"mt-14 2xl:-ml-28 px-8 w-full",children:e.jsx(G,{bordered:!0,className:"shadow-sm -mt-10 border-l-8 border-l-indigo-400",style:{background:"#fff"},header:e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"text-sm font-mono",children:[e.jsx(u.Item,{as:w,to:"/dashbord",children:"Home"}),e.jsx(u.Item,{as:w,to:"/dashbord/user-table",children:"user-list"}),e.jsx(u.Item,{active:!0,className:"text-blue-400",children:"user-information-edit"})]}),e.jsx("h3",{className:"font-bold p-5 text-2xl bg-indigo-500 rounded-lg text-white",children:"Update User Information"})]}),children:e.jsxs("form",{onSubmit:L(k),children:[e.jsx("div",{className:"flex  flex-col justify-center items-center mb-10",children:e.jsx(J,{color:(r==null?void 0:r.fileUrl)!==""?"green":"red",content:(r==null?void 0:r.fileUrl)!==""&&"uploaded",children:e.jsx(K,{fileListVisible:!1,listType:"picture",action:`${O.endpoints.host}/upload`,onUpload:s=>{m(!0),D(s.blobFile,a=>{h(a)})},onSuccess:(s,a)=>{m(!1),c.push(e.jsx(x,{type:"success"})),C(s)},onError:()=>{h(null),m(!1),c.push(e.jsx(x,{type:"error"}))},children:e.jsxs("button",{type:"button",style:{width:150,height:150},children:[o&&e.jsx(W,{backdrop:!0,center:!0}),f?e.jsx("img",{src:f,width:"100%",height:"150%"}):e.jsx("img",{src:l==null?void 0:l.profilePicture,alt:"Profile Picture"})]})})})}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex  p-5",children:e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"First Name"}),e.jsx(t,{...n("firstName"),defaultValue:l==null?void 0:l.firstName,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Last Name"}),e.jsx(t,{...n("lastName"),defaultValue:l==null?void 0:l.lastName,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Email"}),e.jsx(t,{value:l==null?void 0:l.email,...n("email"),className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Phone Number"}),e.jsx(t,{...n("phoneNumber"),defaultValue:(l==null?void 0:l.phoneNumber)||"Not Available",className:"w-56"})]})]})}),e.jsxs("div",{className:"flex  p-5 flex-col 2xl:flex-row gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Cart Number"}),e.jsx(t,{...n("cartNumber"),defaultValue:l==null?void 0:l.cartNumber,className:"w-56"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Zip Code"}),e.jsx(t,{...n("zipCode"),defaultValue:l==null?void 0:l.zipCode,className:"w-56"})]}),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"font-bold",children:"Company"}),e.jsx(S,{name:"company",control:b,render:({field:s})=>e.jsx(A,{placeholder:l==null?void 0:l.company,searchable:!0,...s,size:"md",data:F,className:"w-56",onChange:(a,M)=>{s.onChange(a),_(M.target.innerHTML),B(a)},onBlur:()=>s.onBlur()})})]}),e.jsx("div",{className:"flex gap-5",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Location"}),e.jsx(t,{...n("location"),defaultValue:l==null?void 0:l.location,className:"w-56"})]})})]}),e.jsxs("div",{className:"mt-10 flex gap-5",children:[e.jsx("p",{className:"font-bold",children:"Account Activation Status :"}),e.jsx(S,{name:"ac_status",control:b,render:({field:s})=>e.jsx(A,{searchable:!1,placeholder:(l==null?void 0:l.ac_status)===0?"Pending":(l==null?void 0:l.ac_status)===1?"Active":"Rejected",...s,size:"md",data:E,className:"w-56 -mt-2",onChange:a=>s.onChange(a),onBlur:()=>s.onBlur()})})]}),e.jsxs("div",{className:"mt-5 flex gap-5",children:[e.jsx(U,{appearance:"ghost",onClick:()=>z(),children:"Cancel"}),e.jsx(U,{type:"submit",appearance:"primary",className:"bg-blue-600",children:"Update"})]})]})]})})})})}export{ce as default};
