import{r as s,u as K,a as je,f as fe,e as ge,d as p,c as ye,j as e,P as Ce,B as j,L as be,l as ke,m as u,I as M,k as R,T as ve,n as _,o as Ne,p as A,R as Se,M as P,_ as Le,A as we,q as Be}from"./index-479e3f49.js";import{a as He,d as Ie,b as Ke}from"./BrandServices-6a0a316a.js";function Te(){var L,w,B,H,I;s.useState(!1);const[f,Me]=s.useState(!0);s.useState(!0);const[E,Re]=s.useState(!1);s.useState(10);const[g,y]=s.useState(1);s.useState(!0),s.useState(!0);const[T,_e]=s.useState(!1);s.useState(!0);const h=K(t=>t.user.user),[W,q]=s.useState(""),[F,C]=s.useState(!1);s.useState(!1),s.useState(null),s.useState(!1);const b=je();s.useState(!1),s.useState(null),s.useState({fileUrl:""}),s.useState(0);const{Column:O,HeaderCell:k,Cell:o}=A,$=t=>e.jsx(o,{...t,style:{padding:4}}),U=t=>e.jsx(k,{...t,style:{padding:4},children:e.jsx("div",{className:"flex justify-center font-bold",children:t.children})}),V=({rowData:t,dataKey:n,...r})=>e.jsx(o,{...r,children:e.jsx("div",{className:"flex justify-center -mt-2",children:e.jsx(we,{className:"",src:(t==null?void 0:t.brand_image)||"https://universalele.websites.co.in/obaju-turquoise/img/product-placeholder.png",alt:"P"})})}),G=fe(),{data:a,status:Q,refetch:c}=ge(["brands",g,h.jwt],He,{cacheTime:0}),z=({rowData:t,dataKey:n,...r})=>e.jsx(o,{...r,children:e.jsx("p",{className:"flex justify-center items-center",children:t==null?void 0:t.brand_label})}),J=({rowData:t,dataKey:n,...r})=>e.jsx(o,{...r,children:e.jsx("p",{className:"flex justify-center font-bold items-center",children:t==null?void 0:t.productCount})}),X=({rowData:t,dataKey:n,...r})=>e.jsx(o,{...r,children:e.jsx("p",{className:"flex justify-center font-bold items-center",children:t==null?void 0:t.categoryCount})}),Y=({rowData:t,dataKey:n,...r})=>e.jsx(o,{...r,children:e.jsx("p",{className:"flex justify-center items-center",children:t==null?void 0:t.brand_address})}),[Z,x]=s.useState(!1),[D,ee]=s.useState(null),te=()=>{x(!0)},se=p(Ie),ne=()=>{se.mutate({deleteId:D,token:h.jwt},{onSuccess:t=>{b.push(e.jsx(P,{type:"success",children:"Brand deleted successfully"})),c()},onError:t=>{b.push(e.jsx(P,{type:"error",children:"Brand delete failed !"}))}}),x(!1),c()},v=()=>x(!1),m=[{key:"brand_image",label:"Company Image",cellRenderer:V,width:200},{key:"brand_label",label:"Company Name",cellRenderer:z,width:250},{key:"categoryCount",label:"Category Count",cellRenderer:X,width:150},{key:"productCount",label:"Product Count",cellRenderer:J,width:150},{key:"brand_description",label:"Company Description",cellRenderer:Y,width:400},{key:"actions",label:"Actions",cellRenderer:({rowData:t,...n})=>{const r=()=>{te(),ee(t._id)},i=()=>{G("edit",{state:{myData:t}})};return e.jsx(o,{...n,children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-500 border px-3 py-2 -mt-1 hover:text-white hover:bg-indigo-500 rounded-lg ",onClick:i,children:"Edit"}),e.jsx("button",{className:"text-red-500 border px-3 py-2 -mt-1 rounded-lg  hover:text-white hover:bg-red-500 ",onClick:()=>r(),children:"Delete"})]})})},width:200}];p(Be),ye();const d=p(Ke),re=t=>{q(t),t===""&&(c(),C(!1))},le=()=>{C(!0),Le.promise(d.mutateAsync({queryKey:["user_search",W,h.jwt]}),{loading:"Searching...",success:e.jsx("b",{children:"Company found!"}),error:e.jsx("b",{children:"Company not found in the database!"})})},ae=F&&((L=d==null?void 0:d.data)!=null&&L.data[0])?[(w=d==null?void 0:d.data)==null?void 0:w.data[0]]:(B=a==null?void 0:a.data)==null?void 0:B.data,[N,oe]=s.useState(m.map(t=>t.key)),de=m.filter(t=>N.some(n=>n===t.key)),ce=f?$:o,ie=f?U:k,ue=()=>{y(t=>{var n,r;return t<((r=(n=a==null?void 0:a.data)==null?void 0:n.meta)==null?void 0:r.total_page)?t+1:t}),c()},he=()=>{y(t=>Math.max(t-1,1)),c()},[xe,S]=s.useState(!1),me=t=>{t.target.value==="confirm"?S(!0):S(!1)};c();const l=K(t=>t.settings);return e.jsxs(Ce,{header:e.jsxs("div",{children:[e.jsxs(j,{className:"text-sm font-mono",children:[e.jsx(j.Item,{as:be,to:"/dashbord",children:"dashbord / company"}),e.jsx(j.Item,{active:!0,className:"text-blue-400",children:"companys"})]}),e.jsx("h2",{className:"text-4xl font-bold",children:"Companys"})]}),bordered:!0,children:[e.jsx(ke,{}),e.jsxs(u,{open:Z,onClose:v,children:[e.jsxs(u.Header,{className:"p-5",children:[e.jsx(u.Title,{children:"Are you sure you want delete company ?"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"mt-2",children:"All Category and Product will be deleted under this company"}),e.jsx(M,{onChange:(t,n)=>me(n),placeholder:"Type 'confirm' to delete"})]})]}),e.jsxs(u.Footer,{children:[e.jsx(R,{disabled:!xe,onClick:ne,className:"bg-blue-500 w-20",appearance:"primary",children:"Confirm"}),e.jsx(R,{className:" bg-red-500 text-white",onClick:v,children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsx("hr",{}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex flex-col gap-5 2xl:flex-row 2xl:justify-between",children:[e.jsx("div",{className:"",children:e.jsx(ve,{className:"h-12",data:m,labelKey:"label",valueKey:"key",value:N,onChange:oe,cleanable:!1})}),e.jsx("div",{children:e.jsx("div",{className:" ",children:e.jsxs(_,{children:[e.jsx(M,{placeholder:"Search by Company Name",onChange:t=>re(t)}),e.jsx(_.Button,{onClick:()=>le(),tabIndex:-1,children:e.jsx(Ne,{className:"text-indigo-500 font-bold"})})]})})})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-5",style:{height:l.autoHeight?"auto":400},children:[e.jsx(A,{loading:Q==="loading",height:300,hover:l.hover,fillHeight:T,showHeader:l.header,autoHeight:l.autoHeight,data:E?[]:ae,bordered:l.bordered,cellBordered:l.bordered,headerHeight:l.compact?40:30,rowHeight:l.compact?56:30,children:de.map(t=>{const{key:n,label:r,cellRenderer:i,...pe}=t;return s.createElement(O,{...pe,key:n},e.jsx(ie,{children:r}),i?Se.createElement(i,{dataKey:n}):e.jsx(ce,{dataKey:n}))})}),e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex items-center justify-center py-10 lg:px-0 sm:px-6 px-4",children:e.jsxs("div",{className:"lg:w-3/5 w-full  flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4L4.49984 7.33333",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1.1665 4.00002L4.49984 0.666687",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("p",{onClick:he,className:`text-sm ml-3 font-medium leading-none ${l.theme==="dark"&&"text-white"} `,children:"Previous"})]}),e.jsx("div",{className:"sm:flex hidden",children:e.jsxs("p",{className:`text-sm font-bold leading-none cursor-pointer text-gray-600 hover:text-indigo-700 border-t border-transparent hover:border-indigo-400 pt-3 mr-4 px-2 ${l.theme==="dark"&&"text-white"}`,children:["pages : ",g,"/",(I=(H=a==null?void 0:a.data)==null?void 0:H.meta)==null?void 0:I.total_page]})}),e.jsxs("div",{className:"flex items-center pt-3 text-gray-600 hover:text-indigo-700 cursor-pointer",children:[e.jsx("p",{onClick:ue,className:`text-sm font-medium leading-none mr-3 ${l.theme==="dark"&&"text-white"}`,children:"Next"}),e.jsxs("svg",{width:14,height:8,viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.1665 4H12.8332",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 7.33333L12.8333 4",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.5 0.666687L12.8333 4.00002",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})})})]})]})]})}export{Te as default};
